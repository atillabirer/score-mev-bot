import e,{PublicKey as t,SYSVAR_RENT_PUBKEY as n,SystemProgram as r,SYSVAR_CLOCK_PUBKEY as i,SendTransactionError as o,TransactionInstruction as s,Transaction as a}from"@solana/web3.js";import u,{Buffer as c}from"buffer";import d from"bn.js";import l from"bs58";import*as p from"base64-js";import h from"camelcase";import{sha256 as m}from"js-sha256";import{inflate as f}from"pako";import g from"eventemitter3";var y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},w={},v={};class b{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function S(e,t){return t.property?e+"["+t.property+"]":e}v.Layout=b,v.nameWithProperty=S,v.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof b))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};class E extends b{isCount(){throw new Error("ExternalLayout is abstract")}}class A extends E{constructor(e,t){if(void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){void 0===t&&(t=0);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}class I extends E{constructor(e,t,n){if(!(e instanceof b))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof M||this.layout instanceof x}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}class M extends b{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class x extends b{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}class k extends b{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}class O extends b{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}const _=Math.pow(2,32);function P(e){const t=Math.floor(e/_);return{hi32:t,lo32:e-t*_}}function T(e,t){return e*_+t}class L extends b{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return T(e.readUInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=P(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}class B extends b{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);return T(e.readUInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,n){void 0===n&&(n=0);const r=P(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}class C extends b{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return T(e.readInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=P(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}class D extends b{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);return T(e.readInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,n){void 0===n&&(n=0);const r=P(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}class U extends b{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}encode(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}class N extends b{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}encode(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}class V extends b{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}encode(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}class R extends b{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}encode(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}class j extends b{constructor(e,t,n){if(!(e instanceof b))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof E&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof E)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0,r=this.count;if(r instanceof E&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t){void 0===t&&(t=0);const n=[];let r=0,i=this.count;for(i instanceof E&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n){void 0===n&&(n=0);const r=this.elementLayout,i=e.reduce(((e,i)=>e+r.encode(i,t,n+e)),0);return this.count instanceof E&&this.count.encode(e.length,t,n),i}}class F extends b{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof b),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;try{n=this.fields.reduce(((n,r)=>{const i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t){void 0===t&&(t=0);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){void 0===n&&(n=0);const r=n;let i=0,o=0;for(const r of this.fields){let s=r.span;if(o=0<s?s:0,void 0!==r.property){const i=e[r.property];void 0!==i&&(o=r.encode(i,t,n),0>s&&(s=r.getSpan(t,n)))}i=n,n+=s}return i+o-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class ${constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class z extends ${constructor(e,t){if(!(e instanceof E&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class q extends b{constructor(e,t,n){const r=e instanceof M||e instanceof x;if(r)e=new z(new I(e));else if(e instanceof E&&e.isCount())e=new z(e);else if(!(e instanceof $))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof b))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&r&&(i+=e.layout.span)),super(i,n),this.discriminator=e,this.usesPrefixDiscriminator=r,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;void 0===t&&(t=0);const r=this.discriminator,i=r.decode(e,t);let o=this.registry[i];if(void 0===o){let s=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+s)}else n=o.decode(e,t);return n}encode(e,t,n){void 0===n&&(n=0);const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(e[r.property],t,n),o+i.encode(e[i.property],t,n+o)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new K(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t){let n=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class K extends b{constructor(e,t,n,r){if(!(e instanceof q))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof b))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){void 0===n&&(n=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function W(e){return 0>e&&(e+=4294967296),e}class G extends b{constructor(e,t,n){if(!(e instanceof M||e instanceof x))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=W(e),this},this._packedGetValue=function(){return r}}decode(e,t){const n=this.makeDestinationObject();void 0===t&&(t=0);const r=this.word.decode(e,t);this._packedSetValue(r);for(const e of this.fields)void 0!==e.property&&(n[e.property]=e.decode(r));return n}encode(e,t,n){void 0===n&&(n=0);const r=this.word.decode(t,n);this._packedSetValue(r);for(const t of this.fields)if(void 0!==t.property){const n=e[t.property];void 0!==n&&t.encode(n)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new Q(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new H(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class Q{constructor(e,t,n){if(!(e instanceof G))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const r=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-t),this.wordMask=W(this.valueMask<<this.start),this.property=n}decode(){return W(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==W(e&this.valueMask))throw new TypeError(S("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=W(e<<this.start);this.container._packedSetValue(W(t&~this.wordMask)|n)}}class H extends Q{constructor(e,t){super(e,1,t)}decode(e,t){return!!Q.prototype.decode.call(this,e,t)}encode(e){return"boolean"==typeof e&&(e=+e),Q.prototype.encode.call(this,e)}}class X extends b{constructor(e,t){if(!(e instanceof E&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof E||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){void 0===t&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof E&&(r=e.length),!Buffer.isBuffer(e)||r!==e.length)throw new TypeError(S("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof E&&this.length.encode(r,t,n),r}}class Y extends b{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);let n=t;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-t}decode(e,t,n){void 0===t&&(t=0);let r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}encode(e,t,n){void 0===n&&(n=0),"string"!=typeof e&&(e=e.toString());const r=new Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}class J extends b{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}decode(e,t,n){void 0===t&&(t=0);let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}encode(e,t,n){void 0===n&&(n=0),"string"!=typeof e&&(e=e.toString());const r=new Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}class Z extends b{constructor(e,t){super(0,t),this.value=e}decode(e,t,n){return this.value}encode(e,t,n){return 0}}v.ExternalLayout=E,v.GreedyCount=A,v.OffsetLayout=I,v.UInt=M,v.UIntBE=x,v.Int=k,v.IntBE=O,v.Float=U,v.FloatBE=N,v.Double=V,v.DoubleBE=R,v.Sequence=j,v.Structure=F,v.UnionDiscriminator=$,v.UnionLayoutDiscriminator=z,v.Union=q,v.VariantLayout=K,v.BitStructure=G,v.BitField=Q,v.Boolean=H,v.Blob=X,v.CString=Y,v.UTF8=J,v.Constant=Z,v.greedy=(e,t)=>new A(e,t),v.offset=(e,t,n)=>new I(e,t,n),v.u8=e=>new M(1,e),v.u16=e=>new M(2,e),v.u24=e=>new M(3,e),v.u32=e=>new M(4,e),v.u40=e=>new M(5,e),v.u48=e=>new M(6,e),v.nu64=e=>new L(e),v.u16be=e=>new x(2,e),v.u24be=e=>new x(3,e),v.u32be=e=>new x(4,e),v.u40be=e=>new x(5,e),v.u48be=e=>new x(6,e),v.nu64be=e=>new B(e),v.s8=e=>new k(1,e),v.s16=e=>new k(2,e),v.s24=e=>new k(3,e),v.s32=e=>new k(4,e),v.s40=e=>new k(5,e),v.s48=e=>new k(6,e),v.ns64=e=>new C(e),v.s16be=e=>new O(2,e),v.s24be=e=>new O(3,e),v.s32be=e=>new O(4,e),v.s40be=e=>new O(5,e),v.s48be=e=>new O(6,e),v.ns64be=e=>new D(e),v.f32=e=>new U(e),v.f32be=e=>new N(e),v.f64=e=>new V(e),v.f64be=e=>new R(e),v.struct=(e,t,n)=>new F(e,t,n),v.bits=(e,t,n)=>new G(e,t,n),v.seq=(e,t,n)=>new j(e,t,n),v.union=(e,t,n)=>new q(e,t,n),v.unionLayoutDiscriminator=(e,t)=>new z(e,t),v.blob=(e,t)=>new X(e,t),v.cstr=e=>new Y(e),v.utf8=(e,t)=>new J(e,t),v.const=(e,t)=>new Z(e,t),function(t){var n=y&&y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.map=t.array=t.rustEnum=t.str=t.vecU8=t.tagged=t.vec=t.bool=t.option=t.publicKey=t.i256=t.u256=t.i128=t.u128=t.i64=t.u64=t.struct=t.f64=t.f32=t.i32=t.u32=t.i16=t.u16=t.i8=t.u8=void 0;const r=v,i=e,o=n(d);var s=v;Object.defineProperty(t,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(t,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(t,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(t,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(t,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(t,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(t,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(t,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(t,"struct",{enumerable:!0,get:function(){return s.struct}});class a extends r.Layout{constructor(e,t,n){super(e,n),this.blob=(0,r.blob)(e),this.signed=t}decode(e,t=0){const n=new o.default(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,n=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,n)}}function u(e){return new a(8,!1,e)}t.u64=u,t.i64=function(e){return new a(8,!0,e)},t.u128=function(e){return new a(16,!1,e)},t.i128=function(e){return new a(16,!0,e)},t.u256=function(e){return new a(32,!1,e)},t.i256=function(e){return new a(32,!0,e)};class c extends r.Layout{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}t.publicKey=function(e){return new c((0,r.blob)(32),(e=>new i.PublicKey(e)),(e=>e.toBuffer()),e)};class l extends r.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,r.u8)()}encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+1)+1)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}function p(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function h(e){return e?1:0}function m(e){const t=(0,r.u32)("length"),n=(0,r.struct)([t,(0,r.blob)((0,r.offset)(t,-t.span),"data")]);return new c(n,(({data:e})=>e),(e=>({data:e})),e)}t.option=function(e,t){return new l(e,t)},t.bool=function(e){return new c((0,r.u8)(),p,h,e)},t.vec=function(e,t){const n=(0,r.u32)("length"),i=(0,r.struct)([n,(0,r.seq)(e,(0,r.offset)(n,-n.span),"values")]);return new c(i,(({values:e})=>e),(e=>({values:e})),t)},t.tagged=function(e,t,n){const i=(0,r.struct)([u("tag"),t.replicate("data")]);return new c(i,(function({tag:t,data:n}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},t.vecU8=m,t.str=function(e){return new c(m(),(e=>e.toString("utf-8")),(e=>Buffer.from(e,"utf-8")),e)},t.rustEnum=function(e,t,n){const i=(0,r.union)(null!=n?n:(0,r.u8)(),t);return e.forEach(((e,t)=>i.addVariant(t,e,e.property))),i},t.array=function(e,t,n){const i=(0,r.struct)([(0,r.seq)(e,t,"values")]);return new c(i,(({values:e})=>e),(e=>({values:e})),n)};class f extends r.Layout{constructor(e,t,n){super(e.span+t.span,n),this.keyLayout=e,this.valueLayout=t}decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,n){n=n||0;const r=this.keyLayout.encode(e[0],t,n);return r+this.valueLayout.encode(e[1],t,n+r)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}}t.map=function(e,t,n){const i=(0,r.u32)("length"),o=(0,r.struct)([i,(0,r.seq)(new f(e,t),(0,r.offset)(i,-i.span),"values")]);return new c(o,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),n)}}(w);const ee=e=>"version"in e;function te(e){return l.encode(e)}function ne(e,...t){if(e.args.length!=t.length)throw new Error("Invalid argument length");const n={};let r=0;return e.args.forEach((e=>{n[e.name]=t[r],r+=1})),n}function re(e,t={}){e.forEach((e=>{if("accounts"in e)re(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error(`Invalid arguments: ${e.name} not provided.`)}))}function ie(e){return e instanceof t?e:new t(e)}class oe extends TypeError{constructor(e,t){let n;const{message:r,...i}=e,{path:o}=e;super(0===o.length?r:"At path: "+o.join(".")+" -- "+r),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[e,...t()]}}}function se(e){return"object"==typeof e&&null!=e}function ae(e){return"string"==typeof e?JSON.stringify(e):""+e}function ue(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=n,{refinement:a,message:u="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+ae(r)+"`"}=e;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:u}}function*ce(e,t,n,r){(function(e){return se(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=ue(i,t,n,r);e&&(yield e)}}function*de(e,t,n){void 0===n&&(n={});const{path:r=[],branch:i=[e],coerce:o=!1,mask:s=!1}=n,a={path:r,branch:i};if(o&&(e=t.coercer(e,a),s&&"type"!==t.type&&se(t.schema)&&se(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let u=!0;for(const n of t.validator(e,a))u=!1,yield[n,void 0];for(let[n,c,d]of t.entries(e,a)){const t=de(c,d,{path:void 0===n?r:[...r,n],branch:void 0===n?i:[...i,c],coerce:o,mask:s});for(const r of t)r[0]?(u=!1,yield[r[0],void 0]):o&&(c=r[1],void 0===n?e=c:e instanceof Map?e.set(n,c):e instanceof Set?e.add(c):se(e)&&(e[n]=c))}if(u)for(const n of t.refiner(e,a))u=!1,yield[n,void 0];u&&(yield[void 0,e])}class le{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:r,refiner:i,coercer:o=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=o,this.validator=r?(e,t)=>ce(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>ce(i(e,t),t,this,e):()=>[]}assert(e){return function(e,t){const n=me(e,t);if(n[0])throw n[0]}(e,this)}create(e){return pe(e,this)}is(e){return he(e,this)}mask(e){return function(e,t){const n=me(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(e,this)}validate(e,t){return void 0===t&&(t={}),me(e,this,t)}}function pe(e,t){const n=me(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function he(e,t){return!me(e,t)[0]}function me(e,t,n){void 0===n&&(n={});const r=de(e,t,n),i=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(i[0]){const e=new oe(i[0],(function*(){for(const e of r)e[0]&&(yield e[0])}));return[e,void 0]}return[void 0,i[1]]}function fe(e,t){return new le({type:e,schema:null,validator:t})}function ge(e){return new le({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+ae(e)})}function ye(e){const t=ae(e),n=typeof e;return new le({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||"Expected the literal `"+t+"`, but received: "+ae(n)})}function we(e){return new le({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function ve(){return fe("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+ae(e)))}function be(e){return new le({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function Se(){return fe("string",(e=>"string"==typeof e||"Expected a string, but received: "+ae(e)))}function Ee(e){const t=Object.keys(e);return new le({type:"type",schema:e,*entries(n){if(se(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>se(e)||"Expected an object, but received: "+ae(e)})}function Ae(e){const t=e.map((e=>e.type)).join(" | ");return new le({type:"union",schema:null,coercer(t,n){const r=e.find((e=>{const[n]=e.validate(t,{coerce:!0});return!n}))||Ie();return r.coercer(t,n)},validator(n,r){const i=[];for(const t of e){const[...e]=de(n,t,r),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+ae(n),...i]}})}function Ie(){return fe("unknown",(()=>!0))}async function Me(e,t,n){if(t.length<=99)return await xe(e,t,n);{const r=function(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map(((n,r)=>e.slice(r*t,(r+1)*t)))}(t,99);return(await Promise.all(r.map((t=>xe(e,t,n))))).flat()}}async function xe(e,t,n){const r=null!=n?n:e.commitment,{value:i,context:o}=await e.getMultipleAccountsInfoAndContext(t,r);return i.map(((e,n)=>null===e?null:{publicKey:t[n],account:e,context:o}))}function ke(e){return function(e,t,n){return new le({...e,coercer:(r,i)=>he(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}(_e(e),Oe,(t=>"error"in t?t:{...t,result:pe(t.result,e)}))}const Oe=_e(Ie());function _e(e){return Ae([Ee({jsonrpc:ye("2.0"),id:Se(),result:e}),Ee({jsonrpc:ye("2.0"),id:Se(),error:Ee({code:Ie(),message:Se(),data:be(fe("any",(()=>!0)))})})])}const Pe=(Te=Ee({err:we(Ae([Ee({}),Se()])),logs:we(ge(Se())),accounts:be(we(ge(we(Ee({executable:fe("boolean",(e=>"boolean"==typeof e)),owner:Se(),lamports:ve(),data:ge(Se()),rentEpoch:be(ve())}))))),unitsConsumed:be(ve())}),ke(Ee({context:Ee({slot:ve()}),value:Te})));var Te;class Le{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=null==t?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var r,i,s,a;if(void 0===n&&(n=this.opts),ee(e))t&&e.sign(t);else if(e.feePayer=null!==(r=e.feePayer)&&void 0!==r?r:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,t)for(const n of t)e.partialSign(n);const u=(e=await this.wallet.signTransaction(e)).serialize();try{return await Ce(this.connection,u,n)}catch(t){if(t instanceof De){const n=te(ee(e)?(null===(i=e.signatures)||void 0===i?void 0:i[0])||new Uint8Array:null!==(s=e.signature)&&void 0!==s?s:new Uint8Array),r=await this.connection.getTransaction(n,{commitment:"confirmed"});if(r){const e=null===(a=r.meta)||void 0===a?void 0:a.logMessages;throw e?new o(t.message,e):t}throw t}throw t}}async sendAll(e,t){var n,r,i;void 0===t&&(t=this.opts);const s=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let a=e.map((e=>{var t,n;if(ee(e.tx)){let t=e.tx;return e.signers&&t.sign(e.signers),t}{let r=e.tx,i=null!==(t=e.signers)&&void 0!==t?t:[];return r.feePayer=null!==(n=r.feePayer)&&void 0!==n?n:this.wallet.publicKey,r.recentBlockhash=s,i.forEach((e=>{r.partialSign(e)})),r}}));const u=await this.wallet.signAllTransactions(a),c=[];for(let e=0;e<a.length;e+=1){const s=u[e],a=s.serialize();try{c.push(await Ce(this.connection,a,t))}catch(e){if(e instanceof De){const t=te(ee(s)?(null===(n=s.signatures)||void 0===n?void 0:n[0])||new Uint8Array:null!==(r=s.signature)&&void 0!==r?r:new Uint8Array),a=await this.connection.getTransaction(t,{commitment:"confirmed"});if(a){const t=null===(i=a.meta)||void 0===i?void 0:i.logMessages;throw t?new o(e.message,t):e}throw e}throw e}}return c}async simulate(e,t,n,r){let i,s=(await this.connection.getLatestBlockhash(null!=n?n:this.connection.commitment)).blockhash;if(ee(e)?(t&&(e.sign(t),e=await this.wallet.signTransaction(e)),i=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&(e=await this.wallet.signTransaction(e)),i=await async function(e,t,n,r,i){var s;n&&n.length>0&&t.sign(...n);const a=t._compile(),u=a.serialize(),c=t._serialize(u).toString("base64"),d={encoding:"base64",commitment:null!=r?r:e.commitment};if(i){const e=(Array.isArray(i)?i:a.nonProgramIds()).map((e=>e.toBase58()));d.accounts={encoding:"base64",addresses:e}}n&&(d.sigVerify=!0);const l=[c,d],p=pe(await e._rpcRequest("simulateTransaction",l),Pe);if("error"in p){let e;if("data"in p.error&&(e=null===(s=p.error.data)||void 0===s?void 0:s.logs,e&&Array.isArray(e))){const t="\n    ",n=t+e.join(t);console.error(p.error.message,n)}throw new o("failed to simulate transaction: "+p.error.message,e)}return p.result}(this.connection,e,t,n,r)),i.value.err)throw new Be(i.value);return i.value}}class Be extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Ce(e,t,n){const r=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},i=await e.sendRawTransaction(t,r),o=(await e.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw new De(`Raw transaction ${i} failed (${JSON.stringify(o)})`);return i}class De extends Error{constructor(e){super(e)}}function Ue(){return Le.local()}const Ne=new Map;function Ve(e){return void 0!==Ne.get(e)}class Re extends Error{constructor(e){super(e),this.name="IdlError"}}class je{constructor(e){this.stack=e}static parse(e){var n;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,o=[];for(let s=0;s<e.length;s++){if(i.exec(e[s])){o.pop();continue}const a=null===(n=r.exec(e[s]))||void 0===n?void 0:n[1];a&&o.push(new t(a))}return new je(o)}}class Fe extends Error{constructor(e,t,n,r,i,o){super(n.join("\n").replace("Program log: ","")),this.errorLogs=n,this.logs=r,this.error={errorCode:e,errorMessage:t,comparedValues:o,origin:i},this._programErrorStack=je.parse(r)}static parse(e){if(!e)return null;const n=e.findIndex((e=>e.startsWith("Program log: AnchorError")));if(-1===n)return null;const r=e[n],i=[r];let o;if(n+1<e.length)if("Program log: Left:"===e[n+1]){const r=/^Program log: (.*)$/,s=r.exec(e[n+2])[1],a=r.exec(e[n+4])[1];o=[new t(s),new t(a)],i.push(...e.slice(n+1,n+5))}else if(e[n+1].startsWith("Program log: Left:")){const t=/^Program log: (Left|Right): (.*)$/,r=t.exec(e[n+1])[2],s=t.exec(e[n+2])[2];i.push(...e.slice(n+1,n+3)),o=[r,s]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),u=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[t,n,r]=s.slice(1,4),a={code:t,number:parseInt(n)};return new Fe(a,r,i,e,void 0,o)}if(a){const[t,n,r,s,u]=a.slice(1,6),c={code:r,number:parseInt(s)},d={file:t,line:parseInt(n)};return new Fe(c,u,i,e,d,o)}if(u){const[t,n,r,s]=u.slice(1,5),a=t,c={code:n,number:parseInt(r)};return new Fe(c,s,i,e,a,o)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class $e extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=je.parse(n))}static parse(e,t){const n=e.toString();let r,i;if(n.includes("custom program error:")){let e=n.split("custom program error: ");if(2!==e.length)return null;r=e[1]}else{const e=n.match(/"Custom":([0-9]+)}/g);if(!e||e.length>1)return null;r=e[0].match(/([0-9]+)/g)[0]}try{i=parseInt(r)}catch(e){return null}let o=t.get(i);return void 0!==o?new $e(i,o,e.logs):(o=qe.get(i),void 0!==o?new $e(i,o,e.logs):null)}get program(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack}toString(){return this.msg}}function ze(e,t){Ve("debug-logs")&&console.log("Translating error:",e);const n=Fe.parse(e.logs);if(n)return n;const r=$e.parse(e,t);if(r)return r;if(e.logs){const t={get:function(t,n){return"programErrorStack"===n?t.programErrorStack.stack:"program"===n?t.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=je.parse(e.logs),new Proxy(e,t)}return e}const qe=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"Deprecated Error, feel free to replace with something else"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2020,"A required account for the constraint is None"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);var Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ke.apply(this,arguments)},We=function(){return We=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},We.apply(this,arguments)};function Ge(e){return e.toLowerCase()}var Qe=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],He=/[^A-Z0-9]+/gi;function Xe(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function Ye(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?Qe:n,i=t.stripRegexp,o=void 0===i?He:i,s=t.transform,a=void 0===s?Ge:s,u=t.delimiter,c=void 0===u?" ":u,d=Xe(Xe(e,r,"$1\0$2"),o,"\0"),l=0,p=d.length;"\0"===d.charAt(l);)l++;for(;"\0"===d.charAt(p-1);)p--;return d.slice(l,p).split("\0").map(a).join(c)}(e,We({delimiter:"."},t))}class Je{static fieldLayout(e,t){const n=void 0!==e.name?h(e.name):void 0;switch(e.type){case"bool":return w.bool(n);case"u8":return w.u8(n);case"i8":return w.i8(n);case"u16":return w.u16(n);case"i16":return w.i16(n);case"u32":return w.u32(n);case"i32":return w.i32(n);case"f32":return w.f32(n);case"u64":return w.u64(n);case"i64":return w.i64(n);case"f64":return w.f64(n);case"u128":return w.u128(n);case"i128":return w.i128(n);case"u256":return w.u256(n);case"i256":return w.i256(n);case"bytes":return w.vecU8(n);case"string":return w.str(n);case"publicKey":return w.publicKey(n);default:if("vec"in e.type)return w.vec(Je.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return w.option(Je.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const r=e.type.defined;if(void 0===t)throw new Re("User defined types not provided");const i=t.filter((e=>e.name===r));if(1!==i.length)throw new Re(`Type not found: ${JSON.stringify(e)}`);return Je.typeDefLayout(i[0],t,n)}if("array"in e.type){let r=e.type.array[0],i=e.type.array[1],o=Je.fieldLayout({name:void 0,type:r},t);return w.array(o,i,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if("struct"===e.type.kind){const r=e.type.fields.map((e=>Je.fieldLayout(e,t)));return w.struct(r,n)}if("enum"===e.type.kind){let r=e.type.variants.map((e=>{const n=h(e.name);if(void 0===e.fields)return w.struct([],n);const r=e.fields.map(((e,n)=>e.hasOwnProperty("name")?Je.fieldLayout(e,t):Je.fieldLayout({type:e,name:n.toString()},t)));return w.struct(r,n)}));return void 0!==n?w.rustEnum(r).replicate(n):w.rustEnum(r,n)}throw new Error(`Unknown type kint: ${e}`)}}const Ze="global";class et{constructor(e){this.idl=e,this.ixLayout=et.parseIxLayout(e);const t=new Map;e.instructions.forEach((e=>{const n=nt(Ze,e.name);t.set(l.encode(n),{layout:this.ixLayout.get(e.name),name:e.name})})),this.sighashLayouts=t}encode(e,t){return this._encode(Ze,e,t)}_encode(e,t,n){const r=c.alloc(1e3),i=h(t),o=this.ixLayout.get(i);if(!o)throw new Error(`Unknown method: ${i}`);const s=o.encode(n,r),a=r.slice(0,s);return c.concat([nt(e,t),a])}static parseIxLayout(e){const t=e.instructions.map((t=>{let n=t.args.map((t=>{var n,r;return Je.fieldLayout(t,Array.from([...null!==(n=e.accounts)&&void 0!==n?n:[],...null!==(r=e.types)&&void 0!==r?r:[]]))}));const r=h(t.name);return[r,w.struct(n,r)]}));return new Map(t)}decode(e,t="hex"){"string"==typeof e&&(e="hex"===t?c.from(e,"hex"):l.decode(e));let n=l.encode(e.slice(0,8)),r=e.slice(8);const i=this.sighashLayouts.get(n);return i?{data:i.layout.decode(r),name:i.name}:null}format(e,t){return tt.format(e,t,this.idl)}}class tt{static format(e,t,n){const r=n.instructions.filter((t=>e.name===t.name))[0];if(void 0===r)return console.error("Invalid instruction given"),null;const i=r.args.map((t=>({name:t.name,type:tt.formatIdlType(t.type),data:tt.formatIdlData(t,e.data[t.name],n.types)}))),o=tt.flattenIdlAccounts(r.accounts);return{args:i,accounts:t.map(((e,t)=>t<o.length?{name:o[t].name,...e}:{name:void 0,...e}))}}static formatIdlType(e){if("string"==typeof e)return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if("string"==typeof e.type)return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map((t=>this.formatIdlData({name:"",type:e.type.vec},t))).join(", ")+"]";if(e.type.hasOwnProperty("option"))return null===t?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(void 0===n)throw new Error("User defined types not provided");const r=n.filter((t=>t.name===e.type.defined));if(1!==r.length)throw new Error(`Type not found: ${e.type.defined}`);return tt.formatIdlDataDefined(r[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if("struct"===e.type.kind){const r=e.type,i=Object.keys(t).map((e=>{const i=r.fields.filter((t=>t.name===e))[0];if(void 0===i)throw new Error("Unable to find type");return e+": "+tt.formatIdlData(i,t[e],n)})).join(", ");return"{ "+i+" }"}if(0===e.type.variants.length)return"{}";if(e.type.variants[0].name){const r=e.type.variants,i=Object.keys(t)[0],o=t[i],s=Object.keys(o).map((e=>{var t;const s=o[e],a=null===(t=r[i])||void 0===t?void 0:t.filter((t=>t.name===e))[0];if(void 0===a)throw new Error("Unable to find variant");return e+": "+tt.formatIdlData(a,s,n)})).join(", "),a=h(i,{pascalCase:!0});return 0===s.length?a:`${a} { ${s} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map((e=>{const n=function(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}(e.name);if(e.hasOwnProperty("accounts")){const r=t?`${t} > ${n}`:n;return tt.flattenIdlAccounts(e.accounts,r)}return{...e,name:t?`${t} > ${n}`:n}})).flat()}}function nt(e,t){var n;let r=`${e}:${void 0===n&&(n={}),Ye(t,Ke({delimiter:"_"},n))}`;return c.from(m.digest(r)).slice(0,8)}function rt(e,t){if("enum"===t.type.kind){let n=t.type.variants.map((t=>void 0===t.fields?0:t.fields.map((t=>{if("object"!=typeof t||!("name"in t))throw new Error("Tuple enum variants not yet implemented.");return it(e,t.type)})).reduce(((e,t)=>e+t))));return Math.max(...n)+1}return void 0===t.type.fields?0:t.type.fields.map((t=>it(e,t.type))).reduce(((e,t)=>e+t),0)}function it(e,t){var n,r;switch(t){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"u256":case"i256":case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+it(e,t.option);if("coption"in t)return 4+it(e,t.coption);if("defined"in t){const i=null!==(r=null===(n=e.types)||void 0===n?void 0:n.filter((e=>e.name===t.defined)))&&void 0!==r?r:[];if(1!==i.length)throw new Re(`Type not found: ${JSON.stringify(t)}`);return rt(e,i[0])}if("array"in t){let n=t.array[0],r=t.array[1];return it(e,n)*r}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}class ot{constructor(e){if(void 0===e.accounts)return void(this.accountLayouts=new Map);const t=e.accounts.map((t=>[t.name,Je.typeDefLayout(t,e.types)]));this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=c.alloc(1e3),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);const i=r.encode(t,n);let o=n.slice(0,i),s=ot.accountDiscriminator(e);return c.concat([s,o])}decode(e,t){if(ot.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,8),n=Array.from(this.accountLayouts.keys()).find((e=>ot.accountDiscriminator(e).equals(t)));if(!n)throw new Error("Account descriminator not found");return this.decodeUnchecked(n,e)}decodeUnchecked(e,t){const n=t.slice(8),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);return r.decode(n)}memcmp(e,t){const n=ot.accountDiscriminator(e);return{offset:0,bytes:l.encode(t?c.concat([n,t]):n)}}size(e){var t;return 8+(null!==(t=rt(this.idl,e))&&void 0!==t?t:0)}static accountDiscriminator(e){return c.from(m.digest(`account:${h(e,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)).slice(0,8)}}class st{constructor(e){if(void 0===e.events)return void(this.layouts=new Map);const t=e.events.map((t=>{let n={name:t.name,type:{kind:"struct",fields:t.fields.map((e=>({name:e.name,type:e.type})))}};return[t.name,Je.typeDefLayout(n,e.types)]}));this.layouts=new Map(t),this.discriminators=new Map(void 0===e.events?[]:e.events.map((e=>{return[p.fromByteArray((t=e.name,c.from(m.digest(`event:${t}`)).slice(0,8))),e.name];var t})))}decode(e){let t;try{t=c.from(p.toByteArray(e))}catch(e){return null}const n=p.fromByteArray(t.slice(0,8)),r=this.discriminators.get(n);if(void 0===r)return null;const i=this.layouts.get(r);if(!i)throw new Error(`Unknown event: ${r}`);return{data:i.decode(t.slice(8)),name:r}}}class at{constructor(e){if(void 0===e.types)return void(this.typeLayouts=new Map);const t=e.types.map((t=>[t.name,Je.typeDefLayout(t,e.types)]));this.typeLayouts=new Map(t),this.idl=e}encode(e,t){const n=c.alloc(1e3),r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);const i=r.encode(t,n);return n.slice(0,i)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class ut{constructor(e){this.instruction=new et(e),this.accounts=new ot(e),this.events=new st(e),this.types=new at(e)}}var ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};class dt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var lt=dt;class pt extends dt{isCount(){throw new Error("ExternalLayout is abstract")}}class ht extends pt{constructor(e,t,n){if(!(e instanceof dt))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof mt||this.layout instanceof ft}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}class mt extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class ft extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const gt=Math.pow(2,32);function yt(e){const t=Math.floor(e/gt);return{hi32:t,lo32:e-t*gt}}function wt(e,t){return e*gt+t}class vt extends dt{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return wt(e.readUInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=yt(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}class bt extends dt{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return wt(e.readInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=yt(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}class St extends dt{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof dt),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;try{n=this.fields.reduce(((n,r)=>{const i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t){void 0===t&&(t=0);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){void 0===n&&(n=0);const r=n;let i=0,o=0;for(const r of this.fields){let s=r.span;if(o=0<s?s:0,void 0!==r.property){const i=e[r.property];void 0!==i&&(o=r.encode(i,t,n),0>s&&(s=r.getSpan(t,n)))}i=n,n+=s}return i+o-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Et{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class At extends Et{constructor(e,t){if(!(e instanceof pt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class It extends dt{constructor(e,t,n){const r=e instanceof mt||e instanceof ft;if(r)e=new At(new ht(e));else if(e instanceof pt&&e.isCount())e=new At(e);else if(!(e instanceof Et))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&r&&(i+=e.layout.span)),super(i,n),this.discriminator=e,this.usesPrefixDiscriminator=r,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;void 0===t&&(t=0);const r=this.discriminator,i=r.decode(e,t);let o=this.registry[i];if(void 0===o){let s=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+s)}else n=o.decode(e,t);return n}encode(e,t,n){void 0===n&&(n=0);const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(e[r.property],t,n),o+i.encode(e[i.property],t,n+o)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new Mt(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t){let n=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class Mt extends dt{constructor(e,t,n,r){if(!(e instanceof It))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof dt))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){void 0===n&&(n=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class xt extends dt{constructor(e,t){if(!(e instanceof pt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof pt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){void 0===t&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof pt&&(r=e.length),!Buffer.isBuffer(e)||r!==e.length)throw new TypeError((i="Blob.encode",((o=this).property?i+"["+o.property+"]":i)+" requires (length "+r+") Buffer as src"));var i,o;if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof pt&&this.length.encode(r,t,n),r}}var kt=(e,t,n)=>new ht(e,t,n),Ot=e=>new mt(4,e),_t=e=>new bt(e),Pt=(e,t,n)=>new St(e,t,n),Tt=(e,t,n)=>new It(e,t,n),Lt=(e,t)=>new xt(e,t);class Bt extends lt{constructor(e){super(-1,e),this.property=e,this.layout=Pt([Ot("length"),Ot("lengthPadding"),Lt(kt(Ot(),-8),"chars")],this.property)}encode(e,t,n=0){if(null==e)return this.layout.span;const r={chars:Buffer.from(e,"utf8")};return this.layout.encode(r,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return Ot().span+Ot().span+new d(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Ct(e){return new Bt(e)}function Dt(e){return Lt(32,e)}const Ut=Tt(Ot("instruction"));Ut.addVariant(0,Pt([_t("lamports"),_t("space"),Dt("owner")]),"createAccount"),Ut.addVariant(1,Pt([Dt("owner")]),"assign"),Ut.addVariant(2,Pt([_t("lamports")]),"transfer"),Ut.addVariant(3,Pt([Dt("base"),Ct("seed"),_t("lamports"),_t("space"),Dt("owner")]),"createAccountWithSeed"),Ut.addVariant(4,Pt([Dt("authorized")]),"advanceNonceAccount"),Ut.addVariant(5,Pt([_t("lamports")]),"withdrawNonceAccount"),Ut.addVariant(6,Pt([Dt("authorized")]),"initializeNonceAccount"),Ut.addVariant(7,Pt([Dt("authorized")]),"authorizeNonceAccount"),Ut.addVariant(8,Pt([_t("space")]),"allocate"),Ut.addVariant(9,Pt([Dt("base"),Ct("seed"),_t("space"),Dt("owner")]),"allocateWithSeed"),Ut.addVariant(10,Pt([Dt("base"),Ct("seed"),Dt("owner")]),"assignWithSeed"),Ut.addVariant(11,Pt([_t("lamports"),Ct("seed"),Dt("owner")]),"transferWithSeed"),Math.max(...Object.values(Ut.registry).map((e=>e.span)));class Nt extends lt{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function Vt(e){return new Nt(Lt(32),(e=>new t(e)),(e=>e.toBuffer()),e)}var Rt;Pt([Ot("version"),Ot("state"),Vt("authorizedPubkey"),Vt("nonce"),Pt([(Rt="lamportsPerSignature",new vt(Rt))],"feeCalculator")]);const jt=new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Ft=new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var $t={exports:{}};function zt(e){return"accounts"in e}!function(e,t){var n="undefined"!=typeof self?self:ct,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function f(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=m(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),l(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),l(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,i=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];S.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,n){return new Promise((function(r,o){var s=new v(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new S(i,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=p,e.Request=v,e.Response=S),t.Headers=p,t.Request=v,t.Response=S,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}($t,$t.exports),w.rustEnum([w.struct([],"uninitialized"),w.struct([w.option(w.publicKey(),"authorityAddress")],"buffer"),w.struct([w.publicKey("programdataAddress")],"program"),w.struct([w.u64("slot"),w.option(w.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,w.u32());const qt=w.struct([w.publicKey("authority"),w.vecU8("data")]);function Kt(e,t){var n,r;let i={};const o=e.args?e.args.length:0;if(t.length>o){if(t.length!==o+1)throw new Error(`provided too many arguments ${t} to instruction ${null==e?void 0:e.name} expecting: ${null!==(r=null===(n=e.args)||void 0===n?void 0:n.map((e=>e.name)))&&void 0!==r?r:[]}`);i=t.pop()}return[t,i]}class Wt{static build(e,t,n){if("_inner"===e.name)throw new Re("the _inner name is reserved");const r=(...i)=>{const[o,a]=Kt(e,[...i]);re(e.accounts,a.accounts);const u=r.accounts(a.accounts);return void 0!==a.remainingAccounts&&u.push(...a.remainingAccounts),Ve("debug-logs")&&console.log("Outgoing account metas:",u),new s({keys:u,programId:n,data:t(e.name,ne(e,...o))})};return r.accounts=t=>Wt.accountsArray(t,e.accounts,n,e.name),r}static accountsArray(e,t,n,r){return e?t.map((t=>{if(void 0!==("accounts"in t?t.accounts:void 0)){const i=e[t.name];return Wt.accountsArray(i,t.accounts,n,r).flat()}{const i=t;let o;try{o=ie(e[t.name])}catch(e){throw new Error(`Wrong input type for account "${t.name}" in the instruction accounts object${void 0!==r?' for instruction "'+r+'"':""}. Expected PublicKey or string.`)}const s=i.isOptional&&o.equals(n);return{pubkey:o,isWritable:i.isMut&&!s,isSigner:i.isSigner&&!s}}})).flat():[]}}class Gt{static build(e,t){return(...n)=>{var r,i,o;const[,s]=Kt(e,[...n]),u=new a;if(s.preInstructions&&s.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(r=s.preInstructions)||void 0===r||r.forEach((e=>u.add(e))),null===(i=s.instructions)||void 0===i||i.forEach((e=>u.add(e))),u.add(t(...n)),null===(o=s.postInstructions)||void 0===o||o.forEach((e=>u.add(e))),u}}}class Qt{static build(e,t,n,r){return async(...i)=>{var o;const s=t(...i),[,a]=Kt(e,[...i]);if(void 0===r.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await r.sendAndConfirm(s,null!==(o=a.signers)&&void 0!==o?o:[],a.options)}catch(e){throw ze(e,n)}}}}class Ht{static build(e,t,n,r){var i;const o={};return null===(i=e.accounts)||void 0===i||i.forEach((i=>{const s=h(i.name);o[s]=new Xt(e,i,n,r,t)})),o}}class Xt{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(e,t,n,r,i){this._idlAccount=t,this._programId=n,this._provider=null!=r?r:Ue(),this._coder=null!=i?i:new ut(e),this._size=this._coder.accounts.size(t)}async fetchNullable(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);return n}async fetchNullableAndContext(e,t){const n=await this.getAccountInfoAndContext(e,t),{value:r,context:i}=n;return{data:r&&0!==r.data.length?this._coder.accounts.decode(this._idlAccount.name,r.data):null,context:i}}async fetch(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);if(null===n)throw new Error(`Account does not exist or has no data ${e.toString()}`);return n}async fetchAndContext(e,t){const{data:n,context:r}=await this.fetchNullableAndContext(e,t);if(null===n)throw new Error(`Account does not exist ${e.toString()}`);return{data:n,context:r}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map((e=>e?e.data:null))}async fetchMultipleAndContext(e,t){return(await Me(this._provider.connection,e.map((e=>ie(e))),t)).map((e=>{if(null==e)return null;const{account:t,context:n}=e;return{data:this._coder.accounts.decode(this._idlAccount.name,t.data),context:n}}))}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),n=[];return null!=(null==t?void 0:t.offset)&&null!=(null==t?void 0:t.bytes)&&n.push({memcmp:{offset:t.offset,bytes:t.bytes}}),null!=(null==t?void 0:t.dataSize)&&n.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(e)?e:[]]})).map((({pubkey:e,account:t})=>({publicKey:e,account:this._coder.accounts.decode(this._idlAccount.name,t.data)})))}subscribe(e,t){const n=Yt.get(e.toString());if(n)return n.ee;const r=new g;e=ie(e);const i=this._provider.connection.onAccountChange(e,(e=>{const t=this._coder.accounts.decode(this._idlAccount.name,e.data);r.emit("change",t)}),t);return Yt.set(e.toString(),{ee:r,listener:i}),r}async unsubscribe(e){let t=Yt.get(e.toString());t?Yt&&await this._provider.connection.removeAccountChangeListener(t.listener).then((()=>{Yt.delete(e.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(void 0===this._provider.publicKey)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return r.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:null!=t?t:n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=t?t:n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await function(e,...n){let r=[c.from([97,110,99,104,111,114])];n.forEach((e=>{r.push(e instanceof c?e:ie(e).toBuffer())}));const[i]=t.findProgramAddressSync(r,ie(e));return i}(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(ie(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(ie(e),t)}}const Yt=new Map,Jt="Program log: ",Zt="Program data: ";class en{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new tn(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let r=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,(null!==(n=this._eventListeners.get(e))&&void 0!==n?n:[]).concat(r)),this._eventCallbacks.set(r,[e,t]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((e,t)=>{if(!e.err)for(const n of this._eventParser.parseLogs(e.logs)){const r=this._eventListeners.get(n.name);r&&r.forEach((r=>{const i=this._eventCallbacks.get(r);if(i){const[,r]=i;r(n.data,t.slot,e.signature)}}))}}))),r}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let r=this._eventListeners.get(n);if(!r)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(e),r=r.filter((t=>t!==e)),this._eventListeners.set(n,r),0===r.length&&this._eventListeners.delete(n),0===this._eventCallbacks.size){if(0!==this._eventListeners.size)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class tn{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const n=new rn(e),r=new nn;let i=n.next();for(;null!==i;){let[e,o,s]=this.handleLog(r,i,t);e&&(yield e),o&&r.push(o),s&&r.pop(),i=n.next()}}handleLog(e,t,n){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,n):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(Jt)||e.startsWith(Zt)){const n=e.startsWith(Jt)?e.slice(13):e.slice(14),r=this.coder.events.decode(n);if(t&&null===r)throw new Error(`Unable to decode event ${n}`);return[r,null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return null!==t.match(/^Program (.*) success/g)?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class nn{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class rn{constructor(e){this.logs=e}next(){if(0===this.logs.length)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class on{static build(e,t,n,r,i,o,s){return async(...a)=>{var u;const c=t(...a),[,d]=Kt(e,[...a]);let l;if(void 0===r.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{l=await r.simulate(c,d.signers,null===(u=d.options)||void 0===u?void 0:u.commitment)}catch(e){throw ze(e,n)}if(void 0===l)throw new Error("Unable to simulate transaction");const p=l.logs;if(!p)throw new Error("Simulated logs not found");const h=[];if(s.events){let e=new tn(o,i);for(const t of e.parseLogs(p))h.push(t)}return{events:h,raw:p}}}}function sn(e){return new cn(Lt(8),(e=>ln.fromBuffer(e)),(e=>e.toBuffer()),e)}function an(e){return new cn(Lt(32),(e=>new t(e)),(e=>e.toBuffer()),e)}function un(e,t){return new dn(e,t)}class cn extends lt{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class dn extends lt{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Ot()}encode(e,t,n=0){return null==e?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class ln extends d{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new ln([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}const pn=Pt([an("mint"),an("owner"),sn("amount"),un(an(),"delegate"),(e=>{const t=Tt((e=>new mt(1,e))("discriminator"),null,"state");return t.addVariant(0,Pt([]),"uninitialized"),t.addVariant(1,Pt([]),"initialized"),t.addVariant(2,Pt([]),"frozen"),t})(),un(sn(),"isNative"),sn("delegatedAmount"),un(an(),"closeAuthority")]);class hn{constructor(e,t,n,r,i,o,s,a){this._accounts=t,this._provider=n,this._programId=r,this._idlIx=i,this._idlTypes=s,this._customResolver=a,this._args=e,this._accountStore=new mn(n,o,this._programId)}args(e){this._args=e}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveOptionalsHelper(e,t){const n={};for(const r of t){const t=r.name,i=e[t];void 0!==i&&(gn(i)?zt(r)?n[t]=this.resolveOptionalsHelper(i,r.accounts):n[t]=yn(i,!0):null!==i?n[t]=ie(i):r.isOptional&&(n[t]=this._programId))}return n}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce(((e,t)=>e&&e[t]),this._accounts);if(t&&t.toBase58)return t}set(e,t){let n=this._accounts;e.forEach(((r,i)=>{i==e.length-1&&(n[r]=t),n[r]=n[r]||{},n=n[r]}))}async resolveConst(e,t=[]){for(let n=0;n<e.length;n+=1){const r=e[n],i=r.accounts;i&&await this.resolveConst(i,[...t,h(r.name)]);const o=r,s=h(r.name);if(o.isSigner&&!this.get([...t,s])){if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...t,s],this._provider.wallet.publicKey)}Reflect.has(hn.CONST_ACCOUNTS,s)&&!this.get([...t,s])&&this.set([...t,s],hn.CONST_ACCOUNTS[s])}}_resolveEventCpi(e,n=[]){for(const r in e){const i=e[r],o=i.accounts;o&&this._resolveEventCpi(o,[...n,h(i.name)]);const s=+r+1;if(s===e.length)return;const a=h(e[r].name),u=h(e[s].name);if("eventAuthority"===a&&"program"===u){const e=[...n,a],r=[...n,u];return this.get(e)||this.set(e,t.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),void(this.get(r)||this.set(r,this._programId))}}}async resolvePdas(e,t=[]){let n=0;for(let r=0;r<e.length;r+=1){const i=e[r],o=i.accounts;o&&(n+=await this.resolvePdas(o,[...t,h(i.name)]));const s=i,a=h(i.name);s.pda&&s.pda.seeds.length>0&&!this.get([...t,a])&&Boolean(await this.autoPopulatePda(s,t))&&(n+=1)}return n}async resolveRelations(e,t=[]){let n=0;for(let r=0;r<e.length;r+=1){const i=e[r],o=i.accounts;o&&(n+=await this.resolveRelations(o,[...t,h(i.name)]));const s=i.relations||[],a=h(i.name),u=[...t,a],c=this.get(u);if(c){const e=s.filter((e=>!this.get([...t,h(e)])));if(n+=e.length,e.length>0){const n=await this._accountStore.fetchAccount({publicKey:c});await Promise.all(e.map((async e=>{const r=h(e);return this.set([...t,r],n[r]),n[r]})))}}}return n}async autoPopulatePda(e,n=[]){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(e.pda.seeds.map((e=>this.toBuffer(e,n))));if(r.some((e=>void 0===e)))return;const i=await this.parseProgramId(e,n);if(!i)return;const[o]=await t.findProgramAddress(r,i);this.set([...n,h(e.name)],o)}async parseProgramId(e,n=[]){var r;if(!(null===(r=e.pda)||void 0===r?void 0:r.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new t(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId,n);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}getType(e,t=[]){if(t.length>0&&e.defined){const n=this._idlTypes.find((t=>t.name===e.defined));if(!n)throw new Error(`Cannot find type ${e.defined}`);const r=n.type.fields.find((e=>e.name===t[0]));return this.getType(r.type,t.slice(1))}return e}toBufferConst(e){return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),e.value)}async toBufferArg(e){const t=this.argValue(e);if(void 0!==t)return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),t)}argValue(e){const t=e.path.split("."),n=h(t[0]),r=this._idlIx.args.findIndex((e=>e.name===n));if(-1===r)throw new Error(`Unable to find argument for seed: ${n}`);return t.slice(1).reduce(((e,t)=>(e||{})[t]),this._args[r])}async toBufferAccount(e,t=[]){const n=await this.accountValue(e,t);if(n)return this.toBufferValue(e.type,n)}async accountValue(e,t=[]){const n=e.path.split("."),r=n[0],i=this.get([...t,h(r)]);if(null===i)throw new Error("fieldPubkey is null");if(1===n.length)return i;const o=await this._accountStore.fetchAccount({publicKey:i,name:e.account});return this.parseAccountValue(o,n.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[h(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(t),r;case"u32":let i=Buffer.alloc(4);return i.writeUInt32LE(t),i;case"u64":let o=Buffer.alloc(8);return o.writeBigUInt64LE(BigInt(t)),o;case"string":return Buffer.from((n=t,(new TextEncoder).encode(n)));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}var n}}hn.CONST_ACCOUNTS={associatedTokenProgram:Ft,rent:n,systemProgram:r.programId,tokenProgram:jt,clock:i};class mn{constructor(e,t,n){this._provider=e,this._programId=n,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=t}async ensureIdl(e){if(!this._idls[e.toBase58()]){const t=await Sn.fetchIdl(e,this._provider);if(t){const n=new Sn(t,e,this._provider);this._idls[e.toBase58()]=n.account}}return this._idls[e.toBase58()]}async fetchAccount({publicKey:e,name:t,programId:n=this._programId}){const r=e.toString();if(!this._cache.has(r))if("TokenAccount"===t){const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${r}`);const n=function(e){return pn.decode(e)}(t.data);this._cache.set(r,n)}else if(t){const i=await this.ensureIdl(n);if(i){const n=i[h(t)];if(n){const t=await n.fetch(e);this._cache.set(r,t)}}}else{const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${r}`);const n=t.data,i=await this.ensureIdl(t.owner);if(i){const e=Object.values(i)[0];if(!e)throw new Error("No accounts for this program");const t=e.coder.accounts.decodeAny(n);this._cache.set(r,t)}}return this._cache.get(r)}}class fn{static build(e,t,n,r,i,o,s,a,u,c,d){return(...l)=>new wn(l,r,i,o,s,a,e,t,n,u,c,d)}}function gn(e){return"object"==typeof e&&null!==e&&!("_bn"in e)}function yn(e,t){const n={};for(const r in e){const i=e[r];if(null!==i)n[r]=gn(i)?yn(i,!0):ie(i);else if(t)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!")}return n}class wn{constructor(e,t,n,r,i,o,s,a,u,c,d,l){this._ixFn=t,this._txFn=n,this._rpcFn=r,this._simulateFn=i,this._viewFn=o,this._programId=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=e,this._accountsResolver=new hn(e,this._accounts,s,a,u,c,d,l)}args(e){this._args=e,this._accountsResolver.args(e)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(e){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class vn{static build(e,t,n,r){const i=t.accounts.find((e=>e.isMut)),o=!!t.returns;if(i||!o)return;return async(...i)=>{var o,s;let a=await n(...i);const u=`Program return: ${e} `;let d=a.raw.find((e=>e.startsWith(u)));if(!d)throw new Error("View expected return log");let l=(h=d.slice(u.length),c.from(p.toByteArray(h)));var h;let m=t.returns;if(!m)throw new Error("View expected return type");return Je.fieldLayout({type:m},Array.from([...null!==(o=r.accounts)&&void 0!==o?o:[],...null!==(s=r.types)&&void 0!==s?s:[]])).decode(l)}}}class bn{static build(e,t,n,r,i){const o={},s={},a={},u={},c={},d={},l=function(e){const t=new Map;return e.errors&&e.errors.forEach((e=>{var n;let r=null!==(n=e.msg)&&void 0!==n?n:e.name;t.set(e.code,r)})),t}(e),p=e.accounts?Ht.build(e,t,n,r):{};return e.instructions.forEach((m=>{const f=Wt.build(m,((e,n)=>t.instruction.encode(e,n)),n),g=Gt.build(m,f),y=Qt.build(m,g,l,r),w=on.build(m,g,l,r,t,n,e),v=vn.build(n,m,w,e),b=fn.build(r,n,m,f,g,y,w,v,p,e.types||[],i&&i(m)),S=h(m.name);s[S]=f,a[S]=g,o[S]=y,u[S]=w,c[S]=b,v&&(d[S]=v)})),[o,s,a,p,u,c,d]}}class Sn{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t,n,r,i){t=ie(t),n||(n=Ue()),this._idl=e,this._provider=n,this._programId=t,this._coder=null!=r?r:new ut(e),this._events=new en(this._programId,n,this._coder);const[o,s,a,u,c,d,l]=bn.build(e,this._coder,t,n,null!=i?i:()=>{});this.rpc=o,this.instruction=s,this.transaction=a,this.account=u,this.simulate=c,this.methods=d,this.views=l}static async at(e,t){const n=ie(e),r=await Sn.fetchIdl(n,t);if(!r)throw new Error(`IDL not found for program: ${e.toString()}`);return new Sn(r,n,t)}static async fetchIdl(e,n){n=null!=n?n:Ue();const r=ie(e),i=await async function(e){const n=(await t.findProgramAddress([],e))[0];return await t.createWithSeed(n,"anchor:idl",e)}(r),o=await n.connection.getAccountInfo(i);if(!o)return null;let s=(a=o.data.slice(8),qt.decode(a));var a;const u=f(s.data);return JSON.parse(function(e){return new TextDecoder("utf-8").decode(e)}(u))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new t("11111111111111111111111111111111");var En={};Object.defineProperty(En,"__esModule",{value:!0}),En.s16=En.s8=En.nu64be=En.u48be=En.u40be=En.u32be=En.u24be=En.u16be=En.nu64=En.u48=En.u40=En.u32=En.u24=En.u16=ar=En.u8=En.offset=En.greedy=En.Constant=En.UTF8=En.CString=En.Blob=En.Boolean=En.BitField=En.BitStructure=En.VariantLayout=En.Union=En.UnionLayoutDiscriminator=En.UnionDiscriminator=En.Structure=En.Sequence=En.DoubleBE=En.Double=En.FloatBE=En.Float=En.NearInt64BE=En.NearInt64=En.NearUInt64BE=En.NearUInt64=En.IntBE=En.Int=En.UIntBE=En.UInt=En.OffsetLayout=En.GreedyCount=En.ExternalLayout=En.bindConstructorLayout=En.nameWithProperty=En.Layout=En.uint8ArrayToBuffer=En.checkUint8Array=void 0,En.constant=En.utf8=En.cstr=pr=En.blob=En.unionLayoutDiscriminator=En.union=dr=En.seq=En.bits=cr=En.struct=En.f64be=En.f64=En.f32be=En.f32=En.ns64be=En.s48be=En.s40be=En.s32be=En.s24be=En.s16be=En.ns64=En.s48=En.s40=En.s32=En.s24=void 0;const An=u;function In(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function Mn(e){return In(e),An.Buffer.from(e.buffer,e.byteOffset,e.length)}En.checkUint8Array=In,En.uint8ArrayToBuffer=Mn;class xn{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var kn=En.Layout=xn;function On(e,t){return t.property?e+"["+t.property+"]":e}En.nameWithProperty=On,En.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof xn))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,n)=>t.decode(e,n),writable:!0})};class _n extends xn{isCount(){throw new Error("ExternalLayout is abstract")}}En.ExternalLayout=_n;class Pn extends _n{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){In(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}En.GreedyCount=Pn;class Tn extends _n{constructor(e,t=0,n){if(!(e instanceof xn))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ln||this.layout instanceof Bn}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}En.OffsetLayout=Tn;class Ln extends xn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Mn(t).writeUIntLE(e,n,this.span),this.span}}En.UInt=Ln;class Bn extends xn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Mn(t).writeUIntBE(e,n,this.span),this.span}}En.UIntBE=Bn;class Cn extends xn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readIntLE(t,this.span)}encode(e,t,n=0){return Mn(t).writeIntLE(e,n,this.span),this.span}}En.Int=Cn;class Dn extends xn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readIntBE(t,this.span)}encode(e,t,n=0){return Mn(t).writeIntBE(e,n,this.span),this.span}}En.IntBE=Dn;const Un=Math.pow(2,32);function Nn(e){const t=Math.floor(e/Un);return{hi32:t,lo32:e-t*Un}}function Vn(e,t){return e*Un+t}class Rn extends xn{constructor(e){super(8,e)}decode(e,t=0){const n=Mn(e),r=n.readUInt32LE(t);return Vn(n.readUInt32LE(t+4),r)}encode(e,t,n=0){const r=Nn(e),i=Mn(t);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}En.NearUInt64=Rn;class jn extends xn{constructor(e){super(8,e)}decode(e,t=0){const n=Mn(e);return Vn(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=Nn(e),i=Mn(t);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}En.NearUInt64BE=jn;class Fn extends xn{constructor(e){super(8,e)}decode(e,t=0){const n=Mn(e),r=n.readUInt32LE(t);return Vn(n.readInt32LE(t+4),r)}encode(e,t,n=0){const r=Nn(e),i=Mn(t);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}En.NearInt64=Fn;class $n extends xn{constructor(e){super(8,e)}decode(e,t=0){const n=Mn(e);return Vn(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=Nn(e),i=Mn(t);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}En.NearInt64BE=$n;class zn extends xn{constructor(e){super(4,e)}decode(e,t=0){return Mn(e).readFloatLE(t)}encode(e,t,n=0){return Mn(t).writeFloatLE(e,n),4}}En.Float=zn;class qn extends xn{constructor(e){super(4,e)}decode(e,t=0){return Mn(e).readFloatBE(t)}encode(e,t,n=0){return Mn(t).writeFloatBE(e,n),4}}En.FloatBE=qn;class Kn extends xn{constructor(e){super(8,e)}decode(e,t=0){return Mn(e).readDoubleLE(t)}encode(e,t,n=0){return Mn(t).writeDoubleLE(e,n),8}}En.Double=Kn;class Wn extends xn{constructor(e){super(8,e)}decode(e,t=0){return Mn(e).readDoubleBE(t)}encode(e,t,n=0){return Mn(t).writeDoubleBE(e,n),8}}En.DoubleBE=Wn;class Gn extends xn{constructor(e,t,n){if(!(e instanceof xn))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof _n&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof _n)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof _n&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t=0){const n=[];let r=0,i=this.count;for(i instanceof _n&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n=0){const r=this.elementLayout,i=e.reduce(((e,i)=>e+r.encode(i,t,n+e)),0);return this.count instanceof _n&&this.count.encode(e.length,t,n),i}}En.Sequence=Gn;class Qn extends xn{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof xn),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t=0){In(e);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const r=n;let i=0,o=0;for(const r of this.fields){let s=r.span;if(o=0<s?s:0,void 0!==r.property){const i=e[r.property];void 0!==i&&(o=r.encode(i,t,n),0>s&&(s=r.getSpan(t,n)))}i=n,n+=s}return i+o-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}En.Structure=Qn;class Hn{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}En.UnionDiscriminator=Hn;class Xn extends Hn{constructor(e,t){if(!(e instanceof _n&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}En.UnionLayoutDiscriminator=Xn;class Yn extends xn{constructor(e,t,n){let r;if(e instanceof Ln||e instanceof Bn)r=new Xn(new Tn(e));else if(e instanceof _n&&e.isCount())r=new Xn(e);else{if(!(e instanceof Hn))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=e}if(void 0===t&&(t=null),!(null===t||t instanceof xn))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof Ln||e instanceof Bn)&&(i+=r.layout.span)),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof Ln||e instanceof Bn,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[o.property]=o.decode(e,t+s)}else n=o.decode(e,t);return n}encode(e,t,n=0){const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(e[r.property],t,n),o+i.encode(e[i.property],t,n+o)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new Jn(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t=0){let n;return n=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[n]}}En.Union=Yn;class Jn extends xn{constructor(e,t,n,r){if(!(e instanceof Yn))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof xn))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function Zn(e){return 0>e&&(e+=4294967296),e}En.VariantLayout=Jn;class er extends xn{constructor(e,t,n){if(!(e instanceof Ln||e instanceof Bn))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=Zn(e),this},this._packedGetValue=function(){return r}}decode(e,t=0){const n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);for(const t of this.fields)void 0!==t.property&&(n[t.property]=t.decode(e));return n}encode(e,t,n=0){const r=this.word.decode(t,n);this._packedSetValue(r);for(const t of this.fields)if(void 0!==t.property){const n=e[t.property];void 0!==n&&t.encode(n)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new tr(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new nr(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}En.BitStructure=er;class tr{constructor(e,t,n){if(!(e instanceof er))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const r=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-t),this.wordMask=Zn(this.valueMask<<this.start),this.property=n}decode(e,t){return Zn(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==Zn(e&this.valueMask))throw new TypeError(On("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Zn(e<<this.start);this.container._packedSetValue(Zn(t&~this.wordMask)|n)}}En.BitField=tr;class nr extends tr{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}En.Boolean=nr;class rr extends xn{constructor(e,t){if(!(e instanceof _n&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof _n||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Mn(e).slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof _n&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(On("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw new RangeError("encoding overruns Uint8Array");const i=Mn(e);return Mn(t).write(i.toString("hex"),n,r,"hex"),this.length instanceof _n&&this.length.encode(r,t,n),r}}En.Blob=rr;class ir extends xn{constructor(e){super(-1,e)}getSpan(e,t=0){In(e);let n=t;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Mn(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=An.Buffer.from(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");const o=Mn(t);return r.copy(o,n),o[n+i]=0,i+1}}En.CString=ir;class or extends xn{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return In(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Mn(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=An.Buffer.from(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(Mn(t),n),i}}En.UTF8=or;class sr extends xn{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}En.Constant=sr,En.greedy=(e,t)=>new Pn(e,t),En.offset=(e,t,n)=>new Tn(e,t,n);var ar=En.u8=e=>new Ln(1,e),ur=En.u16=e=>new Ln(2,e);En.u24=e=>new Ln(3,e),En.u32=e=>new Ln(4,e),En.u40=e=>new Ln(5,e),En.u48=e=>new Ln(6,e),En.nu64=e=>new Rn(e),En.u16be=e=>new Bn(2,e),En.u24be=e=>new Bn(3,e),En.u32be=e=>new Bn(4,e),En.u40be=e=>new Bn(5,e),En.u48be=e=>new Bn(6,e),En.nu64be=e=>new jn(e),En.s8=e=>new Cn(1,e),En.s16=e=>new Cn(2,e),En.s24=e=>new Cn(3,e),En.s32=e=>new Cn(4,e),En.s40=e=>new Cn(5,e),En.s48=e=>new Cn(6,e),En.ns64=e=>new Fn(e),En.s16be=e=>new Dn(2,e),En.s24be=e=>new Dn(3,e),En.s32be=e=>new Dn(4,e),En.s40be=e=>new Dn(5,e),En.s48be=e=>new Dn(6,e),En.ns64be=e=>new $n(e),En.f32=e=>new zn(e),En.f32be=e=>new qn(e),En.f64=e=>new Kn(e),En.f64be=e=>new Wn(e);var cr=En.struct=(e,t,n)=>new Qn(e,t,n);En.bits=(e,t,n)=>new er(e,t,n);var dr=En.seq=(e,t,n)=>new Gn(e,t,n),lr=En.union=(e,t,n)=>new Yn(e,t,n);En.unionLayoutDiscriminator=(e,t)=>new Xn(e,t);var pr=En.blob=(e,t)=>new rr(e,t);En.cstr=e=>new ir(e),En.utf8=(e,t)=>new or(e,t),En.constant=(e,t)=>new sr(e,t);var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.toBigIntLE=function(e){{const t=Buffer.from(e);t.reverse();const n=t.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},hr.toBigIntBE=function(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},hr.toBufferLE=function(e,t){{const n=e.toString(16),r=Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return r.reverse(),r}},hr.toBufferBE=function(e,t){{const n=e.toString(16);return Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}};var mr=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,fr=Math.ceil,gr=Math.floor,yr="[BigNumber Error] ",wr=yr+"Number primitive has more than 15 significant digits: ",vr=1e14,br=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Sr=1e9;function Er(e){var t=0|e;return e>0||e===t?t:t-1}function Ar(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Ir(e,t){var n,r,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==c?0:u>c^n?1:-1}function Mr(e,t,n,r){if(e<t||e>n||e!==gr(e))throw Error(yr+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function xr(e){var t=e.c.length-1;return Er(e.e/14)==t&&e.c[t]%2!=0}function kr(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Or(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var _r=function e(t){var n,r,i,o,s,a,u,c,d,l,p=x.prototype={constructor:x,toString:null,valueOf:null},h=new x(1),m=20,f=4,g=-7,y=21,w=-1e7,v=1e7,b=!1,S=1,E=0,A={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",M=!0;function x(e,t){var n,o,s,a,u,c,d,l,p=this;if(!(p instanceof x))return new x(e,t);if(null==t){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>v?p.c=p.e=null:e.e<w?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((c="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;u>=10;u/=10,a++);return void(a>v?p.c=p.e=null:(p.e=a,p.c=[e]))}l=String(e)}else{if(!mr.test(l=String(e)))return i(p,l,c);p.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(a=l.indexOf("."))>-1&&(l=l.replace(".","")),(u=l.search(/e/i))>0?(a<0&&(a=u),a+=+l.slice(u+1),l=l.substring(0,u)):a<0&&(a=l.length)}else{if(Mr(t,2,I.length,"Base"),10==t&&M)return P(p=new x(e),m+p.e+1,f);if(l=String(e),c="number"==typeof e){if(0*e!=0)return i(p,l,c,t);if(p.s=1/e<0?(l=l.slice(1),-1):1,x.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(wr+e)}else p.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(n=I.slice(0,t),a=u=0,d=l.length;u<d;u++)if(n.indexOf(o=l.charAt(u))<0){if("."==o){if(u>a){a=d;continue}}else if(!s&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){s=!0,u=-1,a=0;continue}return i(p,String(e),c,t)}c=!1,(a=(l=r(l,t,10,p.s)).indexOf("."))>-1?l=l.replace(".",""):a=l.length}for(u=0;48===l.charCodeAt(u);u++);for(d=l.length;48===l.charCodeAt(--d););if(l=l.slice(u,++d)){if(d-=u,c&&x.DEBUG&&d>15&&(e>9007199254740991||e!==gr(e)))throw Error(wr+p.s*e);if((a=a-u-1)>v)p.c=p.e=null;else if(a<w)p.c=[p.e=0];else{if(p.e=a,p.c=[],u=(a+1)%14,a<0&&(u+=14),u<d){for(u&&p.c.push(+l.slice(0,u)),d-=14;u<d;)p.c.push(+l.slice(u,u+=14));u=14-(l=l.slice(u)).length}else u-=d;for(;u--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}function k(e,t,n,r){var i,o,s,a,u;if(null==n?n=f:Mr(n,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)u=Ar(e.c),u=1==r||2==r&&(s<=g||s>=y)?kr(u,s):Or(u,s,"0");else if(o=(e=P(new x(e),t,n)).e,a=(u=Ar(e.c)).length,1==r||2==r&&(t<=o||o<=g)){for(;a<t;u+="0",a++);u=kr(u,o)}else if(t-=s,u=Or(u,o,"0"),o+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-a)>0)for(o+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function O(e,t){for(var n,r=1,i=new x(e[0]);r<e.length;r++){if(!(n=new x(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function _(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+14*n-1)>v?e.c=e.e=null:n<w?e.c=[e.e=0]:(e.e=n,e.c=t),e}function P(e,t,n,r){var i,o,s,a,u,c,d,l=e.c,p=br;if(l){e:{for(i=1,a=l[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=14,s=t,d=(u=l[c=0])/p[i-s-1]%10|0;else if((c=fr((o+1)/14))>=l.length){if(!r)break e;for(;l.length<=c;l.push(0));u=d=0,i=1,s=(o%=14)-14+1}else{for(u=a=l[c],i=1;a>=10;a/=10,i++);d=(s=(o%=14)-14+i)<0?0:u/p[i-s-1]%10|0}if(r=r||t<0||null!=l[c+1]||(s<0?u:u%p[i-s-1]),r=n<4?(d||r)&&(0==n||n==(e.s<0?3:2)):d>5||5==d&&(4==n||r||6==n&&(o>0?s>0?u/p[i-s]:0:l[c-1])%10&1||n==(e.s<0?8:7)),t<1||!l[0])return l.length=0,r?(t-=e.e+1,l[0]=p[(14-t%14)%14],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=c,a=1,c--):(l.length=c+1,a=p[14-o],l[c]=s>0?gr(u/p[i-s]%p[s])*a:0),r)for(;;){if(0==c){for(o=1,s=l[0];s>=10;s/=10,o++);for(s=l[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,l[0]==vr&&(l[0]=1));break}if(l[c]+=a,l[c]!=vr)break;l[c--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>v?e.c=e.e=null:e.e<w&&(e.c=[e.e=0])}return e}function T(e){var t,n=e.e;return null===n?e.toString():(t=Ar(e.c),t=n<=g||n>=y?kr(t,n):Or(t,n,"0"),e.s<0?"-"+t:t)}return x.clone=e,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(yr+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Mr(n=e[t],0,Sr,t),m=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(Mr(n=e[t],0,8,t),f=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(Mr(n[0],-Sr,0,t),Mr(n[1],0,Sr,t),g=n[0],y=n[1]):(Mr(n,-Sr,Sr,t),g=-(y=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)Mr(n[0],-Sr,-1,t),Mr(n[1],1,Sr,t),w=n[0],v=n[1];else{if(Mr(n,-Sr,Sr,t),!n)throw Error(yr+t+" cannot be zero: "+n);w=-(v=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(yr+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!n,Error(yr+"crypto unavailable");b=n}else b=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(Mr(n=e[t],0,9,t),S=n),e.hasOwnProperty(t="POW_PRECISION")&&(Mr(n=e[t],0,Sr,t),E=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(yr+t+" not an object: "+n);A=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(yr+t+" invalid: "+n);M="0123456789"==n.slice(0,10),I=n}}return{DECIMAL_PLACES:m,ROUNDING_MODE:f,EXPONENTIAL_AT:[g,y],RANGE:[w,v],CRYPTO:b,MODULO_MODE:S,POW_PRECISION:E,FORMAT:A,ALPHABET:I}},x.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!x.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-Sr&&i<=Sr&&i===gr(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=vr||n!==gr(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(yr+"Invalid BigNumber: "+e)},x.maximum=x.max=function(){return O(arguments,p.lt)},x.minimum=x.min=function(){return O(arguments,p.gt)},x.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return gr(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,o,a=0,u=[],c=new x(h);if(null==e?e=m:Mr(e,0,Sr),i=fr(e/14),b)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(o=131072*t[a]+(t[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[a]=n[0],t[a+1]=n[1]):(u.push(o%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw b=!1,Error(yr+"crypto unavailable");for(t=crypto.randomBytes(i*=7);a<i;)(o=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(u.push(o%1e14),a+=7);a=i/7}if(!b)for(;a<i;)(o=s())<9e15&&(u[a++]=o%1e14);for(e%=14,(i=u[--a])&&e&&(o=br[14-e],u[a]=gr(i/o)*o);0===u[a];u.pop(),a--);if(a<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=14);for(a=1,o=u[0];o>=10;o/=10,a++);a<14&&(r-=14-a)}return c.e=r,c.c=u,c}),x.sum=function(){for(var e=1,t=arguments,n=new x(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=r.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(r,i,o,s,a){var u,c,d,l,p,h,g,y,w=r.indexOf("."),v=m,b=f;for(w>=0&&(l=E,E=0,r=r.replace(".",""),h=(y=new x(i)).pow(r.length-w),E=l,y.c=t(Or(Ar(h.c),h.e,"0"),10,o,e),y.e=y.c.length),d=l=(g=t(r,i,o,a?(u=I,e):(u=e,I))).length;0==g[--l];g.pop());if(!g[0])return u.charAt(0);if(w<0?--d:(h.c=g,h.e=d,h.s=s,g=(h=n(h,y,v,b,o)).c,p=h.r,d=h.e),w=g[c=d+v+1],l=o/2,p=p||c<0||null!=g[c+1],p=b<4?(null!=w||p)&&(0==b||b==(h.s<0?3:2)):w>l||w==l&&(4==b||p||6==b&&1&g[c-1]||b==(h.s<0?8:7)),c<1||!g[0])r=p?Or(u.charAt(1),-v,u.charAt(0)):u.charAt(0);else{if(g.length=c,p)for(--o;++g[--c]>o;)g[c]=0,c||(++d,g=[1].concat(g));for(l=g.length;!g[--l];);for(w=0,r="";w<=l;r+=u.charAt(g[w++]));r=Or(r,d,u.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,i,o,s,a=0,u=e.length,c=t%1e7,d=t/1e7|0;for(e=e.slice();u--;)a=((i=c*(o=e[u]%1e7)+(r=d*o+(s=e[u]/1e7|0)*c)%1e7*1e7+a)/n|0)+(r/1e7|0)+d*s,e[u]=i%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,s,a){var u,c,d,l,p,h,m,f,g,y,w,v,b,S,E,A,I,M=r.s==i.s?1:-1,k=r.c,O=i.c;if(!(k&&k[0]&&O&&O[0]))return new x(r.s&&i.s&&(k?!O||k[0]!=O[0]:O)?k&&0==k[0]||!O?0*M:M/0:NaN);for(g=(f=new x(M)).c=[],M=o+(c=r.e-i.e)+1,a||(a=vr,c=Er(r.e/14)-Er(i.e/14),M=M/14|0),d=0;O[d]==(k[d]||0);d++);if(O[d]>(k[d]||0)&&c--,M<0)g.push(1),l=!0;else{for(S=k.length,A=O.length,d=0,M+=2,(p=gr(a/(O[0]+1)))>1&&(O=e(O,p,a),k=e(k,p,a),A=O.length,S=k.length),b=A,w=(y=k.slice(0,A)).length;w<A;y[w++]=0);I=O.slice(),I=[0].concat(I),E=O[0],O[1]>=a/2&&E++;do{if(p=0,(u=t(O,y,A,w))<0){if(v=y[0],A!=w&&(v=v*a+(y[1]||0)),(p=gr(v/E))>1)for(p>=a&&(p=a-1),m=(h=e(O,p,a)).length,w=y.length;1==t(h,y,m,w);)p--,n(h,A<m?I:O,m,a),m=h.length,u=1;else 0==p&&(u=p=1),m=(h=O.slice()).length;if(m<w&&(h=[0].concat(h)),n(y,h,w,a),w=y.length,-1==u)for(;t(O,y,A,w)<1;)p++,n(y,A<w?I:O,w,a),w=y.length}else 0===u&&(p++,y=[0]);g[d++]=p,y[0]?y[w++]=k[b]||0:(y=[k[b]],w=1)}while((b++<S||null!=y[0])&&M--);l=null!=y[0],g[0]||g.splice(0,1)}if(a==vr){for(d=1,M=g[0];M>=10;M/=10,d++);P(f,o+(f.e=d+14*c-1)+1,s,l)}else f.e=c,f.r=+l;return f}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,c=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,l=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,n,r){var i,o=n?t:t.replace(l,"");if(d.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(a,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,o=o.replace(u,"$1").replace(c,"0.$1")),t!=o))return new x(o,i);if(x.DEBUG)throw Error(yr+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},p.absoluteValue=p.abs=function(){var e=new x(this);return e.s<0&&(e.s=1),e},p.comparedTo=function(e,t){return Ir(this,new x(e,t))},p.decimalPlaces=p.dp=function(e,t){var n,r,i,o=this;if(null!=e)return Mr(e,0,Sr),null==t?t=f:Mr(t,0,8),P(new x(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=14*((i=n.length-1)-Er(this.e/14)),i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},p.dividedBy=p.div=function(e,t){return n(this,new x(e,t),m,f)},p.dividedToIntegerBy=p.idiv=function(e,t){return n(this,new x(e,t),0,1)},p.exponentiatedBy=p.pow=function(e,t){var n,r,i,o,s,a,u,c,d=this;if((e=new x(e)).c&&!e.isInteger())throw Error(yr+"Exponent not an integer: "+T(e));if(null!=t&&(t=new x(t)),s=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return c=new x(Math.pow(+T(d),s?2-xr(e):+T(e))),t?c.mod(t):c;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new x(NaN);(r=!a&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||s&&d.c[1]>=24e7:d.c[0]<8e13||s&&d.c[0]<=9999975e7)))return o=d.s<0&&xr(e)?-0:0,d.e>-1&&(o=1/o),new x(a?1/o:o);E&&(o=fr(E/14+2))}for(s?(n=new x(.5),a&&(e.s=1),u=xr(e)):u=(i=Math.abs(+T(e)))%2,c=new x(h);;){if(u){if(!(c=c.times(d)).c)break;o?c.c.length>o&&(c.c.length=o):r&&(c=c.mod(t))}if(i){if(0===(i=gr(i/2)))break;u=i%2}else if(P(e=e.times(n),e.e+1,1),e.e>14)u=xr(e);else{if(0==(i=+T(e)))break;u=i%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):r&&(d=d.mod(t))}return r?c:(a&&(c=h.div(c)),t?c.mod(t):o?P(c,E,f,void 0):c)},p.integerValue=function(e){var t=new x(this);return null==e?e=f:Mr(e,0,8),P(t,t.e+1,e)},p.isEqualTo=p.eq=function(e,t){return 0===Ir(this,new x(e,t))},p.isFinite=function(){return!!this.c},p.isGreaterThan=p.gt=function(e,t){return Ir(this,new x(e,t))>0},p.isGreaterThanOrEqualTo=p.gte=function(e,t){return 1===(t=Ir(this,new x(e,t)))||0===t},p.isInteger=function(){return!!this.c&&Er(this.e/14)>this.c.length-2},p.isLessThan=p.lt=function(e,t){return Ir(this,new x(e,t))<0},p.isLessThanOrEqualTo=p.lte=function(e,t){return-1===(t=Ir(this,new x(e,t)))||0===t},p.isNaN=function(){return!this.s},p.isNegative=function(){return this.s<0},p.isPositive=function(){return this.s>0},p.isZero=function(){return!!this.c&&0==this.c[0]},p.minus=function(e,t){var n,r,i,o,s=this,a=s.s;if(t=(e=new x(e,t)).s,!a||!t)return new x(NaN);if(a!=t)return e.s=-t,s.plus(e);var u=s.e/14,c=e.e/14,d=s.c,l=e.c;if(!u||!c){if(!d||!l)return d?(e.s=-t,e):new x(l?s:NaN);if(!d[0]||!l[0])return l[0]?(e.s=-t,e):new x(d[0]?s:3==f?-0:0)}if(u=Er(u),c=Er(c),d=d.slice(),a=u-c){for((o=a<0)?(a=-a,i=d):(c=u,i=l),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(r=(o=(a=d.length)<(t=l.length))?a:t,a=t=0;t<r;t++)if(d[t]!=l[t]){o=d[t]<l[t];break}if(o&&(i=d,d=l,l=i,e.s=-e.s),(t=(r=l.length)-(n=d.length))>0)for(;t--;d[n++]=0);for(t=vr-1;r>a;){if(d[--r]<l[r]){for(n=r;n&&!d[--n];d[n]=t);--d[n],d[r]+=vr}d[r]-=l[r]}for(;0==d[0];d.splice(0,1),--c);return d[0]?_(e,d,c):(e.s=3==f?-1:1,e.c=[e.e=0],e)},p.modulo=p.mod=function(e,t){var r,i,o=this;return e=new x(e,t),!o.c||!e.s||e.c&&!e.c[0]?new x(NaN):!e.c||o.c&&!o.c[0]?new x(o):(9==S?(i=e.s,e.s=1,r=n(o,e,0,3),e.s=i,r.s*=i):r=n(o,e,0,S),(e=o.minus(r.times(e))).c[0]||1!=S||(e.s=o.s),e)},p.multipliedBy=p.times=function(e,t){var n,r,i,o,s,a,u,c,d,l,p,h,m,f,g,y=this,w=y.c,v=(e=new x(e,t)).c;if(!(w&&v&&w[0]&&v[0]))return!y.s||!e.s||w&&!w[0]&&!v||v&&!v[0]&&!w?e.c=e.e=e.s=null:(e.s*=y.s,w&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=Er(y.e/14)+Er(e.e/14),e.s*=y.s,(u=w.length)<(l=v.length)&&(m=w,w=v,v=m,i=u,u=l,l=i),i=u+l,m=[];i--;m.push(0));for(f=vr,g=1e7,i=l;--i>=0;){for(n=0,p=v[i]%g,h=v[i]/g|0,o=i+(s=u);o>i;)n=((c=p*(c=w[--s]%g)+(a=h*c+(d=w[s]/g|0)*p)%g*g+m[o]+n)/f|0)+(a/g|0)+h*d,m[o--]=c%f;m[o]=n}return n?++r:m.splice(0,1),_(e,m,r)},p.negated=function(){var e=new x(this);return e.s=-e.s||null,e},p.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new x(e,t)).s,!i||!t)return new x(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/14,s=e.e/14,a=r.c,u=e.c;if(!o||!s){if(!a||!u)return new x(i/0);if(!a[0]||!u[0])return u[0]?e:new x(a[0]?r:0*i)}if(o=Er(o),s=Er(s),a=a.slice(),i=o-s){for(i>0?(s=o,n=u):(i=-i,n=a),n.reverse();i--;n.push(0));n.reverse()}for((i=a.length)-(t=u.length)<0&&(n=u,u=a,a=n,t=i),i=0;t;)i=(a[--t]=a[t]+u[t]+i)/vr|0,a[t]=vr===a[t]?0:a[t]%vr;return i&&(a=[i].concat(a),++s),_(e,a,s)},p.precision=p.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return Mr(e,1,Sr),null==t?t=f:Mr(t,0,8),P(new x(o),e,t);if(!(n=o.c))return null;if(r=14*(i=n.length-1)+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},p.shiftedBy=function(e){return Mr(e,-9007199254740991,9007199254740991),this.times("1e"+e)},p.squareRoot=p.sqrt=function(){var e,t,r,i,o,s=this,a=s.c,u=s.s,c=s.e,d=m+4,l=new x("0.5");if(1!==u||!a||!a[0])return new x(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+T(s)))||u==1/0?(((t=Ar(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=Er((c+1)/2)-(c<0||c%2),r=new x(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new x(u+""),r.c[0])for((u=(c=r.e)+d)<3&&(u=0);;)if(o=r,r=l.times(o.plus(n(s,o,d,1))),Ar(o.c).slice(0,u)===(t=Ar(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(P(r,r.e+m+2,1),e=!r.times(r).eq(s));break}if(!i&&(P(o,o.e+m+2,0),o.times(o).eq(s))){r=o;break}d+=4,u+=4,i=1}return P(r,r.e+m+1,f,e)},p.toExponential=function(e,t){return null!=e&&(Mr(e,0,Sr),e++),k(this,e,t,1)},p.toFixed=function(e,t){return null!=e&&(Mr(e,0,Sr),e=e+this.e+1),k(this,e,t)},p.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=A;else if("object"!=typeof n)throw Error(yr+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,s=r.split("."),a=+n.groupSize,u=+n.secondaryGroupSize,c=n.groupSeparator||"",d=s[0],l=s[1],p=i.s<0,h=p?d.slice(1):d,m=h.length;if(u&&(o=a,a=u,u=o,m-=o),a>0&&m>0){for(o=m%a||a,d=h.substr(0,o);o<m;o+=a)d+=c+h.substr(o,a);u>0&&(d+=c+h.slice(o)),p&&(d="-"+d)}r=l?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?l.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):l):d}return(n.prefix||"")+r+(n.suffix||"")},p.toFraction=function(e){var t,r,i,o,s,a,u,c,d,l,p,m,g=this,y=g.c;if(null!=e&&(!(u=new x(e)).isInteger()&&(u.c||1!==u.s)||u.lt(h)))throw Error(yr+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+T(u));if(!y)return new x(g);for(t=new x(h),d=r=new x(h),i=c=new x(h),m=Ar(y),s=t.e=m.length-g.e-1,t.c[0]=br[(a=s%14)<0?14+a:a],e=!e||u.comparedTo(t)>0?s>0?t:d:u,a=v,v=1/0,u=new x(m),c.c[0]=0;l=n(u,t,0,1),1!=(o=r.plus(l.times(i))).comparedTo(e);)r=i,i=o,d=c.plus(l.times(o=d)),c=o,t=u.minus(l.times(o=t)),u=o;return o=n(e.minus(r),i,0,1),c=c.plus(o.times(d)),r=r.plus(o.times(i)),c.s=d.s=g.s,p=n(d,i,s*=2,f).minus(g).abs().comparedTo(n(c,r,s,f).minus(g).abs())<1?[d,i]:[c,r],v=a,p},p.toNumber=function(){return+T(this)},p.toPrecision=function(e,t){return null!=e&&Mr(e,1,Sr),k(this,e,t,2)},p.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=g||o>=y?kr(Ar(n.c),o):Or(Ar(n.c),o,"0"):10===e&&M?t=Or(Ar((n=P(new x(n),m+o+1,f)).c),n.e,"0"):(Mr(e,2,I.length,"Base"),t=r(Or(Ar(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},p.valueOf=p.toJSON=function(){return T(this)},p._isBigNumber=!0,p[Symbol.toStringTag]="BigNumber",p[Symbol.for("nodejs.util.inspect.custom")]=p.valueOf,null!=t&&x.set(t),x}();new _r("1e+18");const Pr=e=>{const n=pr(32,e),{encode:r,decode:i}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(n),o=n;return o.decode=(e,n)=>{const r=i(e,n);return new t(r)},o.encode=(e,t,n)=>{const i=e.toBuffer();return r(i,t,n)},o};function Tr(e){return new Br(8,!1,e)}function Lr(e){return new Br(16,!1,e)}class Br extends kn{constructor(e,t,n){super(e,n),this.blob=pr(e),this.signed=t}encode(e,t,n=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,n)}decode(e,t=0){const n=new d(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}}function Cr(e,t){return new Dr(e,t)}class Dr extends kn{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=ar()}encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.discriminator.span+this.layout.encode(e,t,n+this.discriminator.span))}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+this.discriminator.span);throw new Error("Invalid option "+this.layout.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}class Ur{constructor(e){}async encode(e,t){switch(e){case"targetOrders":{const e=Buffer.alloc(2208),n=Nr.encode(t,e);return e.slice(0,n)}case"fees":{const e=Buffer.alloc(64),n=Vr.encode(t,e);return e.slice(0,n)}case"ammInfo":{const e=Buffer.alloc(752),n=Rr.encode(t,e);return e.slice(0,n)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"targetOrders":return function(e){return Nr.decode(e)}(t);case"fees":return function(e){return Vr.decode(e)}(t);case"ammInfo":return function(e){return Rr.decode(e)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"targetOrders":return{dataSize:2208};case"fees":return{dataSize:64};case"ammInfo":return{dataSize:752};default:throw new Error(`Invalid account name: ${e}`)}}size(e){switch(e.name){case"targetOrders":return 2208;case"fees":return 64;case"ammInfo":return 752;default:throw new Error(`Invalid account name: ${e.name}`)}}}const Nr=cr([dr(Tr(),4,"owner"),dr(cr([Tr("price"),Tr("vol")]),50,"buyOrders"),dr(Tr(),8,"padding1"),Lr("targetX"),Lr("targetY"),Lr("planXBuy"),Lr("planYBuy"),Lr("planXSell"),Lr("planYSell"),Lr("placedX"),Lr("placedY"),Lr("calcPnlX"),Lr("calcPnlY"),dr(cr([Tr("price"),Tr("vol")]),50,"sellOrders"),dr(Tr(),6,"padding2"),dr(Tr(),10,"replaceBuyClientId"),dr(Tr(),10,"replaceSellClientId"),Tr("lastOrderNumerator"),Tr("lastOrderDenominator"),Tr("planOrdersCur"),Tr("placeOrdersCur"),Tr("validBuyOrderNum"),Tr("validSellOrderNum"),dr(Tr(),10,"padding3"),Lr("freeSlotBits")]),Vr=cr([Tr("minSeparateNumerator"),Tr("minSeparateDenominator"),Tr("tradeFeeNumerator"),Tr("tradeFeeDenominator"),Tr("pnlNumerator"),Tr("pnlDenominator"),Tr("swapFeeNumerator"),Tr("swapFeeDenominator")]),Rr=cr([Tr("status"),Tr("nonce"),Tr("orderNum"),Tr("depth"),Tr("coinDecimals"),Tr("pcDecimals"),Tr("state"),Tr("resetFlag"),Tr("minSize"),Tr("volMaxCutRatio"),Tr("amountWave"),Tr("coinLotSize"),Tr("pcLotSize"),Tr("minPriceMultiplier"),Tr("maxPriceMultiplier"),Tr("sysDecimalValue"),cr([Tr("minSeparateNumerator"),Tr("minSeparateDenominator"),Tr("tradeFeeNumerator"),Tr("tradeFeeDenominator"),Tr("pnlNumerator"),Tr("pnlDenominator"),Tr("swapFeeNumerator"),Tr("swapFeeDenominator")],"fees"),cr([Tr("needTakePnlCoin"),Tr("needTakePnlPc"),Tr("totalPnlPc"),Tr("totalPnlCoin"),Tr("poolOpenTime"),Tr("punishPcAmount"),Tr("punishCoinAmount"),Tr("orderbookToInitTime"),Lr("swapCoinInAmount"),Lr("swapPcOutAmount"),Tr("swapTakePcFee"),Lr("swapPcInAmount"),Lr("swapCoinOutAmount"),Tr("swapTakeCoinFee")],"outPut"),Pr("tokenCoin"),Pr("tokenPc"),Pr("coinMint"),Pr("pcMint"),Pr("lpMint"),Pr("openOrders"),Pr("market"),Pr("serumDex"),Pr("targetOrders"),Pr("withdrawQueue"),Pr("tokenTempLp"),Pr("ammOwner"),Tr("lpAmount"),Tr("clientOrderId"),dr(Tr(),2,"padding")]);class jr{constructor(e){}decode(e){throw new Error("RaydiumAmm program does not have events")}}class Fr{constructor(e){}encode(e,t){switch(e){case"initialize":return function({nonce:e,openTime:t}){return zr({initialize:{nonce:e,openTime:t}},10)}(t);case"initialize2":return function({nonce:e,openTime:t,initPcAmount:n,initCoinAmount:r}){return zr({initialize2:{nonce:e,openTime:t,initPcAmount:n,initCoinAmount:r}},26)}(t);case"monitorStep":return function({planOrderLimit:e,placeOrderLimit:t,cancelOrderLimit:n}){return zr({monitorStep:{planOrderLimit:e,placeOrderLimit:t,cancelOrderLimit:n}},7)}(t);case"deposit":return function({maxCoinAmount:e,maxPcAmount:t,baseSide:n}){return zr({deposit:{maxCoinAmount:e,maxPcAmount:t,baseSide:n}},25)}(t);case"withdraw":return function({amount:e}){return zr({withdraw:{amount:e}},9)}(t);case"migrateToOpenBook":return function({}){return zr({migrateToOpenBook:{}},1)}(t);case"setParams":return function({param:e,value:t,newPubkey:n,fees:r,lastOrderDistance:i,needTakeAmounts:o}){return zr({setParams:{param:e,value:t,newPubkey:n,fees:r,lastOrderDistance:i,needTakeAmounts:o}},3+(null===t?0:8)+1+(null===n?0:32)+1+(null===r?0:64)+1+(null===i?0:16)+1+(null===o?0:16))}(t);case"withdrawPnl":return function({}){return zr({withdrawPnl:{}},1)}(t);case"withdrawSrm":return function({amount:e}){return zr({withdrawSrm:{amount:e}},9)}(t);case"swapBaseIn":return function({amountIn:e,minimumAmountOut:t}){return zr({swapBaseIn:{amountIn:e,minimumAmountOut:t}},17)}(t);case"preInitialize":return function({nonce:e}){return zr({preInitialize:{nonce:e}},2)}(t);case"swapBaseOut":return function({maxAmountIn:e,amountOut:t}){return zr({swapBaseOut:{maxAmountIn:e,amountOut:t}},17)}(t);case"simulateInfo":return function({param:e,swapBaseInValue:t,swapBaseOutValue:n}){return zr({simulateInfo:{param:e,swapBaseInValue:t,swapBaseOutValue:n}},3+(null===t?0:16)+1+(null===n?0:16))}(t);case"adminCancelOrders":return function({limit:e}){return zr({adminCancelOrders:{limit:e}},3)}(t);case"createConfigAccount":return function({}){return zr({createConfigAccount:{}},1)}(t);case"updateConfigAccount":return function({param:e,owner:t}){return zr({updateConfigAccount:{param:e,owner:t}},34)}(t);default:throw new Error(`Invalid instruction: ${e}`)}}decode(e){return function(e){return $r.decode(e)}(e)}encodeState(e,t){throw new Error("RaydiumAmm does not have state")}}const $r=lr(ar("instruction"));function zr(e,t){const n=Buffer.alloc(t);return $r.encode(e,n),n}$r.addVariant(0,cr([ar("nonce"),Tr("openTime")]),"initialize"),$r.addVariant(1,cr([ar("nonce"),Tr("openTime"),Tr("initPcAmount"),Tr("initCoinAmount")]),"initialize2"),$r.addVariant(2,cr([ur("planOrderLimit"),ur("placeOrderLimit"),ur("cancelOrderLimit")]),"monitorStep"),$r.addVariant(3,cr([Tr("maxCoinAmount"),Tr("maxPcAmount"),Tr("baseSide")]),"deposit"),$r.addVariant(4,cr([Tr("amount")]),"withdraw"),$r.addVariant(5,cr([]),"migrateToOpenBook"),$r.addVariant(6,cr([ar("param"),Cr(Tr(),"value"),Cr(Pr(),"newPubkey"),Cr(cr([Tr("minSeparateNumerator"),Tr("minSeparateDenominator"),Tr("tradeFeeNumerator"),Tr("tradeFeeDenominator"),Tr("pnlNumerator"),Tr("pnlDenominator"),Tr("swapFeeNumerator"),Tr("swapFeeDenominator")]),"fees"),Cr(cr([Tr("lastOrderNumerator"),Tr("lastOrderDenominator")]),"lastOrderDistance"),Cr(cr([Tr("needTakePc"),Tr("needTakeCoin")]),"needTakeAmounts")]),"setParams"),$r.addVariant(7,cr([]),"withdrawPnl"),$r.addVariant(8,cr([Tr("amount")]),"withdrawSrm"),$r.addVariant(9,cr([Tr("amountIn"),Tr("minimumAmountOut")]),"swapBaseIn"),$r.addVariant(10,cr([ar("nonce")]),"preInitialize"),$r.addVariant(11,cr([Tr("maxAmountIn"),Tr("amountOut")]),"swapBaseOut"),$r.addVariant(12,cr([ar("param"),Cr(cr([Tr("amountIn"),Tr("minimumAmountOut")]),"swapBaseInValue"),Cr(cr([Tr("maxAmountIn"),Tr("amountOut")]),"swapBaseOutValue")]),"simulateInfo"),$r.addVariant(13,cr([ur("limit")]),"adminCancelOrders"),$r.addVariant(14,cr([]),"createConfigAccount"),$r.addVariant(15,cr([ar("param"),Pr("owner")]),"updateConfigAccount");class qr{constructor(e){}encode(e,t){throw new Error("RaydiumAmm does not have state")}decode(e){throw new Error("RaydiumAmm does not have state")}}class Kr{constructor(e){}encode(e,t){throw new Error("RaydiumAmm does not have user-defined types")}decode(e,t){throw new Error("RaydiumAmm does not have user-defined types")}}class Wr{constructor(e){this.accounts=new Ur(e),this.events=new jr(e),this.instruction=new Fr(e),this.state=new qr(e),this.types=new Kr(e)}}const Gr=new t("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8");function Qr(e){var t;return new Sn(Hr,null!==(t=null==e?void 0:e.programId)&&void 0!==t?t:Gr,null==e?void 0:e.provider,new Wr(Hr))}const Hr={version:"0.3.0",name:"raydium_amm",instructions:[{name:"initialize",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"lpMintAddress",isMut:!0,isSigner:!1},{name:"coinMintAddress",isMut:!1,isSigner:!1},{name:"pcMintAddress",isMut:!1,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!1,isSigner:!1},{name:"poolPcTokenAccount",isMut:!1,isSigner:!1},{name:"poolWithdrawQueue",isMut:!0,isSigner:!1},{name:"poolTargetOrdersAccount",isMut:!0,isSigner:!1},{name:"userLpTokenAccount",isMut:!0,isSigner:!1},{name:"poolTempLpTokenAccount",isMut:!1,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!1,isSigner:!1},{name:"userWallet",isMut:!0,isSigner:!0}],args:[{name:"nonce",type:"u8"},{name:"openTime",type:"u64"}]},{name:"initialize2",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"splAssociatedTokenAccount",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"lpMint",isMut:!0,isSigner:!1},{name:"coinMint",isMut:!1,isSigner:!1},{name:"pcMint",isMut:!1,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"poolWithdrawQueue",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolTempLp",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!1,isSigner:!1},{name:"userWallet",isMut:!0,isSigner:!0},{name:"userTokenCoin",isMut:!0,isSigner:!1},{name:"userTokenPc",isMut:!0,isSigner:!1},{name:"userLpTokenAccount",isMut:!0,isSigner:!1}],args:[{name:"nonce",type:"u8"},{name:"openTime",type:"u64"},{name:"initPcAmount",type:"u64"},{name:"initCoinAmount",type:"u64"}]},{name:"monitorStep",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"poolWithdrawQueue",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"serumReqQ",isMut:!0,isSigner:!1},{name:"serumEventQ",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1}],args:[{name:"planOrderLimit",type:"u16"},{name:"placeOrderLimit",type:"u16"},{name:"cancelOrderLimit",type:"u16"}]},{name:"deposit",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!1,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"lpMintAddress",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"serumMarket",isMut:!1,isSigner:!1},{name:"userCoinTokenAccount",isMut:!0,isSigner:!1},{name:"userPcTokenAccount",isMut:!0,isSigner:!1},{name:"userLpTokenAccount",isMut:!0,isSigner:!1},{name:"userOwner",isMut:!1,isSigner:!0},{name:"serumEventQueue",isMut:!1,isSigner:!1}],args:[{name:"maxCoinAmount",type:"u64"},{name:"maxPcAmount",type:"u64"},{name:"baseSide",type:"u64"}]},{name:"withdraw",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"lpMintAddress",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"poolWithdrawQueue",isMut:!0,isSigner:!1},{name:"poolTempLpTokenAccount",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"userLpTokenAccount",isMut:!0,isSigner:!1},{name:"userCoinTokenAccount",isMut:!0,isSigner:!1},{name:"userPcTokenAccount",isMut:!0,isSigner:!1},{name:"userOwner",isMut:!1,isSigner:!0},{name:"serumEventQ",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"migrateToOpenBook",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTokenCoin",isMut:!0,isSigner:!1},{name:"ammTokenPc",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1},{name:"serumEventQueue",isMut:!0,isSigner:!1},{name:"serumCoinVault",isMut:!0,isSigner:!1},{name:"serumPcVault",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"newAmmOpenOrders",isMut:!0,isSigner:!1},{name:"newSerumProgram",isMut:!1,isSigner:!1},{name:"newSerumMarket",isMut:!1,isSigner:!1},{name:"admin",isMut:!0,isSigner:!0}],args:[]},{name:"setParams",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"ammCoinVault",isMut:!0,isSigner:!1},{name:"ammPcVault",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumCoinVault",isMut:!0,isSigner:!1},{name:"serumPcVault",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"serumEventQueue",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1},{name:"ammAdminAccount",isMut:!1,isSigner:!0}],args:[{name:"param",type:"u8"},{name:"value",type:{option:"u64"}},{name:"newPubkey",type:{option:"publicKey"}},{name:"fees",type:{option:{defined:"Fees"}}},{name:"lastOrderDistance",type:{option:{defined:"LastOrderDistance"}}},{name:"needTakeAmounts",type:{option:{defined:"NeedTake"}}}]},{name:"withdrawPnl",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammConfig",isMut:!1,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"coinPnlTokenAccount",isMut:!0,isSigner:!1},{name:"pcPnlTokenAccount",isMut:!0,isSigner:!1},{name:"pnlOwnerAccount",isMut:!1,isSigner:!0},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumEventQueue",isMut:!1,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1}],args:[]},{name:"withdrawSrm",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!1,isSigner:!1},{name:"ammOwnerAccount",isMut:!1,isSigner:!0},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"srmToken",isMut:!0,isSigner:!1},{name:"destSrmToken",isMut:!0,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"swapBaseIn",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1},{name:"serumEventQueue",isMut:!0,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"uerSourceTokenAccount",isMut:!0,isSigner:!1},{name:"uerDestinationTokenAccount",isMut:!0,isSigner:!1},{name:"userSourceOwner",isMut:!1,isSigner:!0}],args:[{name:"amountIn",type:"u64"},{name:"minimumAmountOut",type:"u64"}]},{name:"preInitialize",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolWithdrawQueue",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"lpMintAddress",isMut:!0,isSigner:!1},{name:"coinMintAddress",isMut:!1,isSigner:!1},{name:"pcMintAddress",isMut:!1,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"poolTempLpTokenAccount",isMut:!0,isSigner:!1},{name:"serumMarket",isMut:!1,isSigner:!1},{name:"userWallet",isMut:!0,isSigner:!0}],args:[{name:"nonce",type:"u8"}]},{name:"swapBaseOut",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1},{name:"serumEventQueue",isMut:!0,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"uerSourceTokenAccount",isMut:!0,isSigner:!1},{name:"uerDestinationTokenAccount",isMut:!0,isSigner:!1},{name:"userSourceOwner",isMut:!1,isSigner:!0}],args:[{name:"maxAmountIn",type:"u64"},{name:"amountOut",type:"u64"}]},{name:"simulateInfo",accounts:[{name:"amm",isMut:!1,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!1,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!1,isSigner:!1},{name:"poolPcTokenAccount",isMut:!1,isSigner:!1},{name:"lpMintAddress",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!1,isSigner:!1},{name:"serumEventQueue",isMut:!1,isSigner:!1}],args:[{name:"param",type:"u8"},{name:"swapBaseInValue",type:{option:{defined:"SwapInstructionBaseIn"}}},{name:"swapBaseOutValue",type:{option:{defined:"SwapInstructionBaseOut"}}}]},{name:"adminCancelOrders",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"amm",isMut:!1,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"ammTargetOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"ammOwnerAccount",isMut:!1,isSigner:!0},{name:"ammConfig",isMut:!0,isSigner:!1},{name:"serumProgram",isMut:!1,isSigner:!1},{name:"serumMarket",isMut:!0,isSigner:!1},{name:"serumCoinVaultAccount",isMut:!0,isSigner:!1},{name:"serumPcVaultAccount",isMut:!0,isSigner:!1},{name:"serumVaultSigner",isMut:!1,isSigner:!1},{name:"serumEventQ",isMut:!0,isSigner:!1},{name:"serumBids",isMut:!0,isSigner:!1},{name:"serumAsks",isMut:!0,isSigner:!1}],args:[{name:"limit",type:"u16"}]},{name:"createConfigAccount",accounts:[{name:"admin",isMut:!0,isSigner:!0},{name:"ammConfig",isMut:!0,isSigner:!1},{name:"owner",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"updateConfigAccount",accounts:[{name:"admin",isMut:!1,isSigner:!0},{name:"ammConfig",isMut:!0,isSigner:!1}],args:[{name:"param",type:"u8"},{name:"owner",type:"publicKey"}]}],accounts:[{name:"targetOrders",type:{kind:"struct",fields:[{name:"owner",type:{array:["u64",4]}},{name:"buyOrders",type:{array:[{defined:"TargetOrder"},50]}},{name:"padding1",type:{array:["u64",8]}},{name:"targetX",type:"u128"},{name:"targetY",type:"u128"},{name:"planXBuy",type:"u128"},{name:"planYBuy",type:"u128"},{name:"planXSell",type:"u128"},{name:"planYSell",type:"u128"},{name:"placedX",type:"u128"},{name:"placedY",type:"u128"},{name:"calcPnlX",type:"u128"},{name:"calcPnlY",type:"u128"},{name:"sellOrders",type:{array:[{defined:"TargetOrder"},50]}},{name:"padding2",type:{array:["u64",6]}},{name:"replaceBuyClientId",type:{array:["u64",10]}},{name:"replaceSellClientId",type:{array:["u64",10]}},{name:"lastOrderNumerator",type:"u64"},{name:"lastOrderDenominator",type:"u64"},{name:"planOrdersCur",type:"u64"},{name:"placeOrdersCur",type:"u64"},{name:"validBuyOrderNum",type:"u64"},{name:"validSellOrderNum",type:"u64"},{name:"padding3",type:{array:["u64",10]}},{name:"freeSlotBits",type:"u128"}]}},{name:"fees",type:{kind:"struct",fields:[{name:"minSeparateNumerator",type:"u64"},{name:"minSeparateDenominator",type:"u64"},{name:"tradeFeeNumerator",type:"u64"},{name:"tradeFeeDenominator",type:"u64"},{name:"pnlNumerator",type:"u64"},{name:"pnlDenominator",type:"u64"},{name:"swapFeeNumerator",type:"u64"},{name:"swapFeeDenominator",type:"u64"}]}},{name:"ammInfo",type:{kind:"struct",fields:[{name:"status",type:"u64"},{name:"nonce",type:"u64"},{name:"orderNum",type:"u64"},{name:"depth",type:"u64"},{name:"coinDecimals",type:"u64"},{name:"pcDecimals",type:"u64"},{name:"state",type:"u64"},{name:"resetFlag",type:"u64"},{name:"minSize",type:"u64"},{name:"volMaxCutRatio",type:"u64"},{name:"amountWave",type:"u64"},{name:"coinLotSize",type:"u64"},{name:"pcLotSize",type:"u64"},{name:"minPriceMultiplier",type:"u64"},{name:"maxPriceMultiplier",type:"u64"},{name:"sysDecimalValue",type:"u64"},{name:"fees",type:{defined:"Fees"}},{name:"outPut",type:{defined:"OutPutData"}},{name:"tokenCoin",type:"publicKey"},{name:"tokenPc",type:"publicKey"},{name:"coinMint",type:"publicKey"},{name:"pcMint",type:"publicKey"},{name:"lpMint",type:"publicKey"},{name:"openOrders",type:"publicKey"},{name:"market",type:"publicKey"},{name:"serumDex",type:"publicKey"},{name:"targetOrders",type:"publicKey"},{name:"withdrawQueue",type:"publicKey"},{name:"tokenTempLp",type:"publicKey"},{name:"ammOwner",type:"publicKey"},{name:"lpAmount",type:"u64"},{name:"clientOrderId",type:"u64"},{name:"padding",type:{array:["u64",2]}}]}}],types:[{name:"WithdrawDestToken",type:{kind:"struct",fields:[{name:"withdrawAmount",type:"u64"},{name:"coinAmount",type:"u64"},{name:"pcAmount",type:"u64"},{name:"destTokenCoin",type:"publicKey"},{name:"destTokenPc",type:"publicKey"}]}},{name:"WithdrawQueue",type:{kind:"struct",fields:[{name:"owner",type:{array:["u64",4]}},{name:"head",type:"u64"},{name:"count",type:"u64"},{name:"buf",type:{array:[{defined:"WithdrawDestToken"},64]}}]}},{name:"TargetOrder",type:{kind:"struct",fields:[{name:"price",type:"u64"},{name:"vol",type:"u64"}]}},{name:"OutPutData",type:{kind:"struct",fields:[{name:"needTakePnlCoin",type:"u64"},{name:"needTakePnlPc",type:"u64"},{name:"totalPnlPc",type:"u64"},{name:"totalPnlCoin",type:"u64"},{name:"poolOpenTime",type:"u64"},{name:"punishPcAmount",type:"u64"},{name:"punishCoinAmount",type:"u64"},{name:"orderbookToInitTime",type:"u64"},{name:"swapCoinInAmount",type:"u128"},{name:"swapPcOutAmount",type:"u128"},{name:"swapTakePcFee",type:"u64"},{name:"swapPcInAmount",type:"u128"},{name:"swapCoinOutAmount",type:"u128"},{name:"swapTakeCoinFee",type:"u64"}]}},{name:"AmmConfig",type:{kind:"struct",fields:[{name:"pnlOwner",type:"publicKey"},{name:"cancelOwner",type:"publicKey"},{name:"pending1",type:{array:["u64",28]}},{name:"pending2",type:{array:["u64",32]}}]}},{name:"LastOrderDistance",type:{kind:"struct",fields:[{name:"lastOrderNumerator",type:"u64"},{name:"lastOrderDenominator",type:"u64"}]}},{name:"NeedTake",type:{kind:"struct",fields:[{name:"needTakePc",type:"u64"},{name:"needTakeCoin",type:"u64"}]}},{name:"SwapInstructionBaseIn",type:{kind:"struct",fields:[{name:"amountIn",type:"u64"},{name:"minimumAmountOut",type:"u64"}]}},{name:"SwapInstructionBaseOut",type:{kind:"struct",fields:[{name:"maxAmountIn",type:"u64"},{name:"amountOut",type:"u64"}]}}],errors:[{code:0,name:"AlreadyInUse",msg:"AlreadyInUse"},{code:1,name:"InvalidProgramAddress",msg:"InvalidProgramAddress"},{code:2,name:"ExpectedMint",msg:"ExpectedMint"},{code:3,name:"ExpectedAccount",msg:"ExpectedAccount"},{code:4,name:"InvalidCoinVault",msg:"InvalidCoinVault"},{code:5,name:"InvalidPCVault",msg:"InvalidPCVault"},{code:6,name:"InvalidTokenLP",msg:"InvalidTokenLP"},{code:7,name:"InvalidDestTokenCoin",msg:"InvalidDestTokenCoin"},{code:8,name:"InvalidDestTokenPC",msg:"InvalidDestTokenPC"},{code:9,name:"InvalidPoolMint",msg:"InvalidPoolMint"},{code:10,name:"InvalidOpenOrders",msg:"InvalidOpenOrders"},{code:11,name:"InvalidSerumMarket",msg:"InvalidSerumMarket"},{code:12,name:"InvalidSerumProgram",msg:"InvalidSerumProgram"},{code:13,name:"InvalidTargetOrders",msg:"InvalidTargetOrders"},{code:14,name:"InvalidWithdrawQueue",msg:"InvalidWithdrawQueue"},{code:15,name:"InvalidTempLp",msg:"InvalidTempLp"},{code:16,name:"InvalidCoinMint",msg:"InvalidCoinMint"},{code:17,name:"InvalidPCMint",msg:"InvalidPCMint"},{code:18,name:"InvalidOwner",msg:"InvalidOwner"},{code:19,name:"InvalidSupply",msg:"InvalidSupply"},{code:20,name:"InvalidDelegate",msg:"InvalidDelegate"},{code:21,name:"InvalidSignAccount",msg:"Invalid Sign Account"},{code:22,name:"InvalidStatus",msg:"InvalidStatus"},{code:23,name:"InvalidInstruction",msg:"Invalid instruction"},{code:24,name:"WrongAccountsNumber",msg:"Wrong accounts number"},{code:25,name:"WithdrawTransferBusy",msg:"Withdraw_transfer is busy"},{code:26,name:"WithdrawQueueFull",msg:"WithdrawQueue is full"},{code:27,name:"WithdrawQueueEmpty",msg:"WithdrawQueue is empty"},{code:28,name:"InvalidParamsSet",msg:"Params Set is invalid"},{code:29,name:"InvalidInput",msg:"InvalidInput"},{code:30,name:"ExceededSlippage",msg:"instruction exceeds desired slippage limit"},{code:31,name:"CalculationExRateFailure",msg:"CalculationExRateFailure"},{code:32,name:"CheckedSubOverflow",msg:"Checked_Sub Overflow"},{code:33,name:"CheckedAddOverflow",msg:"Checked_Add Overflow"},{code:34,name:"CheckedMulOverflow",msg:"Checked_Mul Overflow"},{code:35,name:"CheckedDivOverflow",msg:"Checked_Div Overflow"},{code:36,name:"CheckedEmptyFunds",msg:"Empty Funds"},{code:37,name:"CalcPnlError",msg:"Calc pnl error"},{code:38,name:"InvalidSplTokenProgram",msg:"InvalidSplTokenProgram"},{code:39,name:"TakePnlError",msg:"Take Pnl error"},{code:40,name:"InsufficientFunds",msg:"Insufficient funds"},{code:41,name:"ConversionFailure",msg:"Conversion to u64 failed with an overflow or underflow"},{code:42,name:"InvalidUserToken",msg:"user token input does not match amm"},{code:43,name:"InvalidSrmMint",msg:"InvalidSrmMint"},{code:44,name:"InvalidSrmToken",msg:"InvalidSrmToken"},{code:45,name:"TooManyOpenOrders",msg:"TooManyOpenOrders"},{code:46,name:"OrderAtSlotIsPlaced",msg:"OrderAtSlotIsPlaced"},{code:47,name:"InvalidSysProgramAddress",msg:"InvalidSysProgramAddress"},{code:48,name:"InvalidFee",msg:"The provided fee does not match the program owner's constraints"},{code:49,name:"RepeatCreateAmm",msg:"Repeat create amm about market"},{code:50,name:"NotAllowZeroLP",msg:"Not allow Zero LP"},{code:51,name:"InvalidCloseAuthority",msg:"Token account has a close authority"},{code:52,name:"InvalidFreezeAuthority",msg:"Pool token mint has a freeze authority"},{code:53,name:"InvalidReferPCMint",msg:"InvalidReferPCMint"},{code:54,name:"InvalidConfigAccount",msg:"InvalidConfigAccount"},{code:55,name:"RepeatCreateConfigAccount",msg:"Repeat create staking config account"},{code:56,name:"UnknownAmmError",msg:"Unknown Amm Error"}]};export{Gr as RAYDIUM_AMM_PROGRAM_ID,Qr as raydiumAmmProgram};
//# sourceMappingURL=index.js.map
